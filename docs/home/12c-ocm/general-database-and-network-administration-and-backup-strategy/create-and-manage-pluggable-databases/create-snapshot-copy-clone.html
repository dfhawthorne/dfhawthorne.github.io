---
layout: default
title: 'Create Snapshot Copy Clone'
base-url: home/12c-ocm/general-database-and-network-administration-and-backup-strategy/create-and-manage-pluggable-databases/create-snapshot-copy-clone.html
breadcrumbs:
- title: 'Home'
  url: home.html
- title: '12C OCM'
  url: home/12c-ocm.html
- title: 'General Database and Network Administration, and Backup Strategy'
  url: home/12c-ocm/general-database-and-network-administration-and-backup-strategy.html
- title: 'Create and manage pluggable databases'
  url: home/12c-ocm/general-database-and-network-administration-and-backup-strategy/create-and-manage-pluggable-databases.html
- title: 'Create Snapshot Copy Clone'
  url: home/12c-ocm/general-database-and-network-administration-and-backup-strategy/create-and-manage-pluggable-databases/create-snapshot-copy-clone.html
table-of-contents:
- toc-url: 'Overview'
  toc-text: 'Overview'
- toc-url: 'Reference'
  toc-text: 'Reference'
- toc-url: 'Procedure'
  toc-text: 'Procedure'
  toc-menu:
  - toc-url: 'Overview1'
    toc-text: 'Overview'
  - toc-url: 'Conflict-in-Documentation'
    toc-text: 'Conflict in Documentation'
  - toc-url: 'Set-System-Parameter'
    toc-text: 'Set System Parameter'
  - toc-url: 'Make-Source-PDB-Read-Only'
    toc-text: 'Make Source PDB Read Only'
  - toc-url: 'Create-Snapshot-Clone'
    toc-text: 'Create Snapshot Clone'
  - toc-url: 'Save-PDB-States'
    toc-text: 'Save PDB States'
---
<div dir="ltr">
 <br/>
 <h2>
  <a name="TOC-Overview">
  </a>
  Overview
 </h2>
 <p>
  Create a pluggable databases using the CLONEDB feature.
 </p>
 <h2>
  <a name="TOC-Reference">
  </a>
  Reference
 </h2>
 <ul>
  <li>
   <a href="https://docs.oracle.com/database/121/ADMIN/toc.htm" rel="nofollow">
    Oracle
    <sup>
     ®
    </sup>
    12.1 Database Administrator's Guide
   </a>
  </li>
  <ul>
   <li>
    <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#ADMIN13549" rel="nofollow">
     38 Creating and Removing PDBs with SQL*Plus
    </a>
   </li>
   <ul>
    <li>
     <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#ADMIN13550" rel="nofollow">
      38.1 About Creating and Removing PDBs
     </a>
    </li>
    <ul>
     <li>
      <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#ADMIN13551" rel="nofollow">
       38.1.1 Techniques for Creating a PDB
      </a>
     </li>
    </ul>
    <li>
     <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#ADMIN13584" rel="nofollow">
      38.4 Creating a PDB by Cloning an Existing PDB or Non-CDB
     </a>
    </li>
    <ul>
     <li>
      <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#ADMIN13584" rel="nofollow">
       38.4.1 About Cloning a PDB
      </a>
     </li>
     <ul>
      <li>
       <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B__CEGEECGG" rel="nofollow">
        The SNAPSHOT COPY Clause
       </a>
      </li>
     </ul>
    </ul>
   </ul>
  </ul>
  <li>
   <a href="https://docs.oracle.com/database/121/REFRN/toc.htm" rel="nofollow">
    Oracle
    <sup>
     ®
    </sup>
    12.1 Database Reference
   </a>
  </li>
  <ul>
   <li>
    <a href="https://docs.oracle.com/database/121/REFRN/GUID-FD266F6F-D047-4EBB-8D96-B51B1DCA2D61.htm" rel="nofollow">
     1 Initiialization Parameters
    </a>
   </li>
   <ul>
    <li>
     <a href="https://docs.oracle.com/database/121/REFRN/GUID-2CB764E9-250D-475F-BC16-038D5FC045A5.htm#REFRN10330" rel="nofollow">
      1.27
      <span style="font-family:monospace;font-size:15px">
       CLONEDB
      </span>
     </a>
    </li>
   </ul>
  </ul>
 </ul>
 <h2>
  <a name="TOC-Procedure">
  </a>
  Procedure
 </h2>
 <h3>
  <a name="TOC-Overview1">
  </a>
  Overview
 </h3>
 <p>
  The procedure to follow is in “
  <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" rel="nofollow">
   Create a PDB by cloning an existing PDB or non-CDB
  </a>
  ”.
 </p>
 <p>
  A version of the full script can be found
  <a href="https://github.com/dfhawthorne/sql-ocm12c/blob/master/General%20Database%20and%20Network%20Administration%2C%20and%20Backup%20Strategy/Create%20and%20manage%20pluggable%20databases/Create_Snapshot_Copy_Clone.sql" rel="nofollow">
   here
  </a>
  on GitHub.
 </p>
 <h3>
  <a name="TOC-Conflict-in-Documentation">
  </a>
  Conflict in Documentation
 </h3>
 <p>
  The
  <a href="https://docs.oracle.com/database/121/REFRN/GUID-2CB764E9-250D-475F-BC16-038D5FC045A5.htm#REFRN10330" rel="nofollow">
   Reference Manual
  </a>
  says:
 </p>
 <blockquote>
  <p>
   <code>
    CLONEDB
   </code>
   should be set on
   <span style="font-weight:bold">
    Direct NFS Client
   </span>
   CloneDB databases. When this parameter is set, the CloneDB database uses the database backup as the backing store for the datafiles.
  </p>
  <p style="font-weight:bold;text-align:right">
   Emphasis Mine
  </p>
 </blockquote>
 <p>
  However, the
  <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B__CEGEECGG" rel="nofollow">
   DBA Guide
  </a>
  says:
 </p>
 <blockquote>
  <p>
   When you use the
   <code>
    SNAPSHOT
   </code>
   <code>
    COPY
   </code>
   clause to create a clone of a source PDB and the
   <code>
    CLONEDB
   </code>
   initialization parameter is set to
   <code>
    TRUE
   </code>
   ,
   <span style="font-weight:bold">
    the underlying file system for the source PDB's files can be any local file system
   </span>
   , network file system (NFS), or clustered file system that has Direct NFS enabled. However, the source PDB must remain in open read-only mode as long as any clones exist.
  </p>
  <p style="font-weight:bold;text-align:right">
   Emphasis Mine
  </p>
 </blockquote>
 <h3>
  <a name="TOC-Set-System-Parameter">
  </a>
  Set System Parameter
 </h3>
 <p>
  In order to use the
  <span style="font-family:monospace;font-size:15px">
   SNAPSHOT COPY
  </span>
  method of PDB cloning, the
  <a href="https://docs.oracle.com/database/121/REFRN/GUID-2CB764E9-250D-475F-BC16-038D5FC045A5.htm#REFRN10330" rel="nofollow">
   <span style="font-family:monospace;font-size:15px">
    CLONEDB
   </span>
  </a>
  system parameter must be set to
  <span style="font-family:monospace;font-size:15px">
   TRUE
  </span>
  . This is not a dynamic parameter. The container instance has to be in
  <span style="font-family:monospace;font-size:15px">
   TRUE
  </span>
  state for this parameter to be changed. This is done through the following SQL*Plus commands:
 </p>
 <pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px">connect / as sysdba
startup nomount
alter system set clonedb=true scope=spfile;
startup force
</pre>
 <h3>
  <a name="TOC-Make-Source-PDB-Read-Only">
  </a>
  Make Source PDB Read Only
 </h3>
 <p>
  While any clones exist, the source PDB has to be in READ ONLY mode. In this example, I am using the VEGEMITE PDB as the source PDB. I put this PDB in READ ONLY mode as follows:
 </p>
 <pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px">connect / as sysdba
alter pluggable database vegemite close;
alter pluggable database vegemite open read only;
</pre>
 <h3>
  <a name="TOC-Create-Snapshot-Clone">
  </a>
  Create Snapshot Clone
 </h3>
 <p>
  Now that the source PDB (VEGEMITE) is open in READ ONLY mode, I can create the clone PDB (VEGEMITER) as follows:
 </p>
 <pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px">connect / as sysdba
create pluggable database vegemiter from vegemite snapshot copy;
alter pluggable database vegemiter open read write;
</pre>
 <h3>
  <a name="TOC-Save-PDB-States">
  </a>
  Save PDB States
 </h3>
 <p>
  To ensure the proper open states are kept across startups, I used the following commands:
 </p>
 <pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px">connect / as sysdba
alter pluggable database vegemite save state;
alter pluggable database vegemiter save state;
</pre>
</div>
