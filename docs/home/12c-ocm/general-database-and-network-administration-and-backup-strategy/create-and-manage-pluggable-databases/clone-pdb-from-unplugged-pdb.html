---
layout: default
title: 'Clone PDB from Unplugged PDB'
base-url: home/12c-ocm/general-database-and-network-administration-and-backup-strategy/create-and-manage-pluggable-databases/clone-pdb-from-unplugged-pdb.html
breadcrumbs:
- title: 'Home'
  url: home.html
- title: '12C OCM'
  url: home/12c-ocm.html
- title: 'General Database and Network Administration, and Backup Strategy'
  url: home/12c-ocm/general-database-and-network-administration-and-backup-strategy.html
- title: 'Create and manage pluggable databases'
  url: home/12c-ocm/general-database-and-network-administration-and-backup-strategy/create-and-manage-pluggable-databases.html
- title: 'Clone PDB from Unplugged PDB'
  url: home/12c-ocm/general-database-and-network-administration-and-backup-strategy/create-and-manage-pluggable-databases/clone-pdb-from-unplugged-pdb.html
table-of-contents:
- toc-url: 'Overview'
  toc-text: 'Overview'
- toc-url: 'References'
  toc-text: 'References'
- toc-url: 'Procedure'
  toc-text: 'Procedure'
  toc-menu:
  - toc-url: 'Set-Database-Environment'
    toc-text: 'Set Database Environment'
  - toc-url: 'Start-SQL-Plus-Session'
    toc-text: 'Start SQL*Plus Session'
  - toc-url: 'Startup-JAM-Instance'
    toc-text: 'Startup JAM Instance'
  - toc-url: 'See-Current-State-of-PDBs'
    toc-text: 'See Current State of PDBs'
  - toc-url: 'Attempt-to-Unplug-JAM-PDB'
    toc-text: 'Attempt to Unplug JAM PDB'
  - toc-url: 'Close-JAM-PDB'
    toc-text: 'Close JAM PDB'
  - toc-url: 'Unplug-JAM-PDB'
    toc-text: 'Unplug JAM PDB'
  - toc-url: 'Attempt-to-Plug-JAM-PDB-back-In'
    toc-text: 'Attempt to Plug JAM PDB back In'
  - toc-url: 'Drop-JAM-PDB'
    toc-text: 'Drop JAM PDB'
  - toc-url: 'See-Current-State-of-PDBs1'
    toc-text: 'See Current State of PDBs'
  - toc-url: 'Confirm-JAM-PDB-Has-Been-Removed'
    toc-text: 'Confirm JAM PDB Has Been Removed'
  - toc-url: 'Clone-Unplugged-JAM-PDB-as-JAM0'
    toc-text: 'Clone Unplugged JAM PDB as JAM0'
  - toc-url: 'Clone-Unplugged-JAM-PDB-as-JAM1'
    toc-text: 'Clone Unplugged JAM PDB as JAM1'
  - toc-url: 'Opem-Cloned-PDBs-As-Read-Write'
    toc-text: 'Opem Cloned PDBs As Read/Write'
  - toc-url: 'See-Current-State-of-PDBs2'
    toc-text: 'See Current State of PDBs'
  - toc-url: 'Save-Current-State-of-Cloned-PDBs'
    toc-text: 'Save Current State of Cloned PDBs'
---
<div dir="ltr">
 <br/>
 <h2>
  <a name="TOC-Overview">
  </a>
  Overview
 </h2>
 <p>
  This procedure demonstrates cloning an unplugged PDB multiple times.
 </p>
 <h2>
  <a name="TOC-References">
  </a>
  References
 </h2>
 <ul>
  <li>
   <a href="https://docs.oracle.com/database/121/ADMIN/toc.htm" rel="nofollow">
    Oracle® 12.1 Database Administrator's Guide
   </a>
  </li>
  <ul>
   <li>
    <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#ADMIN13549" rel="nofollow">
     38 Creating and Removing PDBs with SQL*Plus
    </a>
   </li>
   <ul>
    <li>
     <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#ADMIN13572" rel="nofollow">
      38.5 Creating a PDB by Plugging an Unplugged PDB into a CDB
     </a>
    </li>
    <ul>
     <li>
      <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#ADMIN13855" rel="nofollow">
       38.5.2 Plugging In an Unplugged PDB
      </a>
     </li>
    </ul>
   </ul>
  </ul>
  <li>
   <a href="https://docs.oracle.com/database/121/ERRMG/toc.htm" rel="nofollow">
    Oracle® 12.1 Database Error Messages
   </a>
  </li>
  <ul>
   <li style="font-family:monospace;font-size:large">
    <a href="https://docs.oracle.com/database/121/ERRMG/ORA-60001.htm#GUID-9B78A028-D760-4810-9CFC-9013FBD1FCC9__GUID-57176DA6-6098-4970-B614-B7729FF7D841" rel="nofollow">
     ORA-65012
    </a>
   </li>
   <li style="font-family:monospace;font-size:large">
    <a href="https://docs.oracle.com/database/121/ERRMG/ORA-60001.htm#GUID-9B78A028-D760-4810-9CFC-9013FBD1FCC9__GUID-0AA303A6-2499-47D7-8F11-AAD00A18B230" rel="nofollow">
     ORA-65025
    </a>
   </li>
  </ul>
  <li>
   <a href="https://docs.oracle.com/database/121/REFRN/toc.htm" rel="nofollow">
    Oracle® 12.1 Database Reference
   </a>
  </li>
  <ul>
   <li>
    <a href="https://docs.oracle.com/database/121/REFRN/GUID-8865F65B-EF6D-44A5-B0A1-3179EFF0C36A.htm" rel="nofollow">
     Part II Static Data Dictionary Views
    </a>
   </li>
   <ul>
    <li style="font-family:monospace;font-size:large">
     <a href="https://docs.oracle.com/database/121/REFRN/GUID-439126EA-A6B6-45B8-AAFA-37EE4356BBEF.htm" rel="nofollow">
      DBA_PDBS
     </a>
    </li>
   </ul>
   <li>
    <a href="https://docs.oracle.com/database/121/REFRN/GUID-8C5690B0-DE10-4460-86DF-80111869CF4C.htm" rel="nofollow">
     Part III Dynamic Performance Views
    </a>
   </li>
   <ul>
    <li style="font-family:monospace;font-size:large">
     <a href="https://docs.oracle.com/database/121/REFRN/GUID-A399F608-36C8-4DF0-9A13-CEE25637653E.htm#REFRN30652" rel="nofollow">
      V$PDBS
     </a>
    </li>
   </ul>
  </ul>
  <li>
   <a href="https://docs.oracle.com/database/121/SQLRF/toc.htm" rel="nofollow">
    Oracle® 12.1 SQL Language Reference
   </a>
  </li>
  <ul>
   <li style="font-family:monospace;font-size:large">
    <a href="https://docs.oracle.com/database/121/SQLRF/statements_2008.htm#SQLRF55667" rel="nofollow">
     ALTER PLUGGABLE DATABASE
    </a>
   </li>
   <li style="font-family:monospace;font-size:large">
    <a href="https://docs.oracle.com/database/121/SQLRF/statements_6010.htm#SQLRF55686" rel="nofollow">
     CREATE PLUGGABLE DATABASE
    </a>
   </li>
   <li style="font-family:monospace;font-size:large">
    <a href="https://docs.oracle.com/database/121/SQLRF/statements_8028.htm#SQLRF55699" rel="nofollow">
     DROP PLUGGABLE DATABASE
    </a>
   </li>
  </ul>
  <li>
   <a href="https://docs.oracle.com/database/121/SQPUG/toc.htm" rel="nofollow">
    SQL*Plus® User's Guide and Reference 12.1
   </a>
  </li>
  <ul>
   <li style="font-family:monospace;font-size:large">
    <a href="https://docs.oracle.com/database/121/SQPUG/ch_twelve045.htm#SQPUG128" rel="nofollow">
     STARTUP
    </a>
   </li>
  </ul>
 </ul>
 <h2>
  <a name="TOC-Procedure">
  </a>
  Procedure
 </h2>
 <p>
  This procedure is based on “
  <a href="https://docs.oracle.com/database/121/ADMIN/cdb_plug.htm#ADMIN13855" rel="nofollow">
   38.5.2 Plugging In an Unplugged PDB
  </a>
  ”.
 </p>
 <h3>
  <a name="TOC-Set-Database-Environment">
  </a>
  Set Database Environment
 </h3>
 <p>
  Set the database environment to the JAM instance as follows:
 </p>
 <pre style="background-color:lightgreen;border:5px groove black;margin-left:10px;padding:2px">. oraenv</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">ORACLE_SID = [ocm12c] ? jar
The Oracle base remains unchanged with value /opt/app/oracle</pre>
 <h3>
  <a name="TOC-Start-SQL-Plus-Session">
  </a>
  Start SQL*Plus Session
 </h3>
 <p>
  Start a SQL*Plus session as follows:
 </p>
 <pre style="background-color:lightgreen;border:5px groove black;margin-left:10px;padding:2px">sqlplus / as sysdba</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">SQL*Plus: Release 12.1.0.2.0 Production on Wed Oct 23 13:36:21 2019

Copyright (c) 1982, 2014, Oracle.  All rights reserved.

Connected to an idle instance.</pre>
 <h3>
  <a name="TOC-Startup-JAM-Instance">
  </a>
  Startup JAM Instance
 </h3>
 <p>
  Run the following SQL command to start the JAM instance:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px"><a href="https://docs.oracle.com/database/121/SQPUG/ch_twelve045.htm#SQPUG128" rel="nofollow">startup</a></pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">ORACLE instance started.

Total System Global Area 1543503872 bytes
Fixed Size                  2924736 bytes
Variable Size             939528000 bytes
Database Buffers          587202560 bytes
Redo Buffers               13848576 bytes
Database mounted.
Database opened.</pre>
 <h3>
  <a name="TOC-See-Current-State-of-PDBs">
  </a>
  See Current State of PDBs
 </h3>
 <p>
  Run the following SQL query to what the state of all the PDBs are:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px">select name, open_mode from <a href="https://docs.oracle.com/database/121/REFRN/GUID-A399F608-36C8-4DF0-9A13-CEE25637653E.htm#REFRN30652" rel="nofollow">V$PDBS</a>;</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">NAME                           OPEN_MODE
------------------------------ ----------
PDB$SEED                       READ ONLY
PLUM                           READ WRITE
JAM                            READ WRITE
VEGEMITE                       READ ONLY
VEGEMITER                      READ WRITE</pre>
 <p>
  See “
  <a href="home/12c-ocm/general-database-and-network-administration-and-backup-strategy/create-and-manage-pluggable-databases/create-snapshot-copy-clone.html">
   Create Snapshot Copy Clone
  </a>
  ” for an explanation of the status of the last two (2) PDBs.
 </p>
 <h3>
  <a name="TOC-Attempt-to-Unplug-JAM-PDB">
  </a>
  Attempt to Unplug JAM PDB
 </h3>
 <p>
  Run the following SQL command to unplug the JAM PDB:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px"><a href="https://docs.oracle.com/database/121/SQLRF/statements_2008.htm#SQLRF55667" rel="nofollow">alter pluggable database</a> jam unplug into 'jam.xml';</pre>
 <p>
  The command failed with the following errors:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">alter pluggable database jam unplug into 'jam.xml'
*
ERROR at line 1:
<a href="https://docs.oracle.com/database/121/ERRMG/ORA-60001.htm#GUID-9B78A028-D760-4810-9CFC-9013FBD1FCC9__GUID-0AA303A6-2499-47D7-8F11-AAD00A18B230" rel="nofollow">ORA-65025</a>: Pluggable database JAM is not closed on all instances.
</pre>
 <p>
  I forgot to close the PDB before unplugging.
 </p>
 <h3>
  <a name="TOC-Close-JAM-PDB">
  </a>
  Close JAM PDB
 </h3>
 <p>
  Run the following SQL command to close the JAM PDB:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px"><a href="https://docs.oracle.com/database/121/SQLRF/statements_2008.htm#SQLRF55667" rel="nofollow">alter pluggable database</a> jam close;</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">Pluggable database altered.</pre>
 <h3>
  <a name="TOC-Unplug-JAM-PDB">
  </a>
  Unplug JAM PDB
 </h3>
 <p>
  Run the following SQL command to unplug the JAM PDB:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px"><a href="https://docs.oracle.com/database/121/SQLRF/statements_2008.htm#SQLRF55667" rel="nofollow">alter pluggable database</a> jam unplug into 'jam.xml';</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">Pluggable database altered.</pre>
 <h3>
  <a name="TOC-Attempt-to-Plug-JAM-PDB-back-In">
  </a>
  Attempt to Plug JAM PDB back In
 </h3>
 <p>
  Run the following SQL command to plug the JAM PDB back in as a clone:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px"><a href="https://docs.oracle.com/database/121/SQLRF/statements_6010.htm#SQLRF55686" rel="nofollow">create pluggable database</a> jam as clone using 'jam.xml';</pre>
 <p>
  The command failed with the following errors:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">create pluggable database jam as clone using 'jam.xml'
*
ERROR at line 1:
<a href="https://docs.oracle.com/database/121/ERRMG/ORA-60001.htm#GUID-9B78A028-D760-4810-9CFC-9013FBD1FCC9__GUID-57176DA6-6098-4970-B614-B7729FF7D841" rel="nofollow">ORA-65012</a>: Pluggable database JAM already exists.
</pre>
 <p>
  Even though the PDB has been unplugged, it is still registered to the root container.
 </p>
 <h3>
  <a name="TOC-Drop-JAM-PDB">
  </a>
  Drop JAM PDB
 </h3>
 <p>
  Run the following SQL command to drop the JAM PDB:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px"><a href="https://docs.oracle.com/database/121/SQLRF/statements_8028.htm#SQLRF55699" rel="nofollow">drop pluggable database</a> jam;</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">Pluggable database dropped.</pre>
 <h3>
  <a name="TOC-See-Current-State-of-PDBs1">
  </a>
  See Current State of PDBs
 </h3>
 <p>
  Run the following SQL query to what the state of all the PDBs are:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px">select name, open_mode from <a href="https://docs.oracle.com/database/121/REFRN/GUID-A399F608-36C8-4DF0-9A13-CEE25637653E.htm#REFRN30652" rel="nofollow">V$PDBS</a>s</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">NAME                           OPEN_MODE
------------------------------ ----------
PDB$SEED                       READ ONLY
PLUM                           READ WRITE
VEGEMITE                       READ ONLY
VEGEMITER                      READ WRITE
</pre>
 <p>
  The JAM PDB seems to have been removed.
 </p>
 <h3>
  <a name="TOC-Confirm-JAM-PDB-Has-Been-Removed">
  </a>
  Confirm JAM PDB Has Been Removed
 </h3>
 <p>
  Run the following SQL query to confirm JAM PDB has been removed:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px">select pdb_name,status from <a href="https://docs.oracle.com/database/121/REFRN/GUID-439126EA-A6B6-45B8-AAFA-37EE4356BBEF.htm" rel="nofollow">DBA_PDBS</a>;</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">PDB_NAME  STATUS
--------- ------
PDB$SEED  NORMAL
PLUM      NORMAL
VEGEMITE  NORMAL
VEGEMITER NORMAL
</pre>
 <h3>
  <a name="TOC-Clone-Unplugged-JAM-PDB-as-JAM0">
  </a>
  Clone Unplugged JAM PDB as JAM0
 </h3>
 <p>
  Run the following SQL command to plug the unplugged JAM PDB back in as clone called JAM0:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px"><a href="https://docs.oracle.com/database/121/SQLRF/statements_6010.htm#SQLRF55686" rel="nofollow">create pluggable database</a> jam0 as clone using 'jam.xml';</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">Pluggable database created.</pre>
 <h3>
  <a name="TOC-Clone-Unplugged-JAM-PDB-as-JAM1">
  </a>
  Clone Unplugged JAM PDB as JAM1
 </h3>
 <p>
  Run the following SQL command to plug the unplugged JAM PDB back in as clone called JAM1:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px"><a href="https://docs.oracle.com/database/121/SQLRF/statements_6010.htm#SQLRF55686" rel="nofollow">create pluggable database</a> jam1 as clone using 'jam.xml'</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">Pluggable database created.</pre>
 <h3>
  <a name="TOC-Opem-Cloned-PDBs-As-Read-Write">
  </a>
  Opem Cloned PDBs As Read/Write
 </h3>
 <p>
  Run the following SQL command to opem cloned PDBs as read/write:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px"><a href="https://docs.oracle.com/database/121/SQLRF/statements_2008.htm#SQLRF55667" rel="nofollow">alter pluggable database</a> jam0, jam1 open;</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">Pluggable database altered.</pre>
 <h3>
  <a name="TOC-See-Current-State-of-PDBs2">
  </a>
  See Current State of PDBs
 </h3>
 <p>
  Run the following SQL query to what the state of all the PDBs are:
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px">select name, open_mode from <a href="https://docs.oracle.com/database/121/REFRN/GUID-A399F608-36C8-4DF0-9A13-CEE25637653E.htm#REFRN30652" rel="nofollow">V$PDBS</a>;</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">NAME                           OPEN_MODE
------------------------------ ----------
PDB$SEED                       READ ONLY
PLUM                           READ WRITE
JAM0                           READ WRITE
VEGEMITE                       READ ONLY
VEGEMITER                      READ WRITE
JAM1                           READ WRITE

6 rows selected.</pre>
 <h3>
  <a name="TOC-Save-Current-State-of-Cloned-PDBs">
  </a>
  Save Current State of Cloned PDBs
 </h3>
 <p>
  Run the following SQL command to save the current open mode of these new PDBs (JAM0 and JAM1):
 </p>
 <pre style="background-color:#def87c;border:5px groove black;margin-left:10px;padding:2px"><a href="https://docs.oracle.com/database/121/SQLRF/statements_2008.htm#SQLRF55667" rel="nofollow">alter pluggable database</a> jam0, jam1 save state;</pre>
 <p>
  The expected output is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">Pluggable database altered.</pre>
</div>
