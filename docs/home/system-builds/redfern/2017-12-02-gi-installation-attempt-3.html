---
layout: default
title: '2017-12-02 GI Installation Attempt #3'
base-url: home/system-builds/redfern/2017-12-02-gi-installation-attempt-3.html
breadcrumbs:
- title: 'Home'
  url: index.html
- title: 'System Builds'
  url: home/system-builds.html
- title: 'REDFERN'
  url: home/system-builds/redfern.html
- title: '2017-12-02 GI Installation Attempt #3'
  url: home/system-builds/redfern/2017-12-02-gi-installation-attempt-3.html
scroll-bar:
  left-link:
    url: home/system-builds/redfern/2017-11-30-de-install-gi.html
    title: '2017-11-30 De-Install GI'
  right-link:
    url: home/system-builds/redfern/2018-02-01-revised-planning.html
    title: '2018-02-01 Revised Planning'
table-of-contents:
- toc-url: 'Overview'
  toc-text: 'Overview'
- toc-url: 'References'
  toc-text: 'References'
- toc-url: 'Procedure'
  toc-text: 'Procedure'
  toc-menu:
  - toc-url: 'Installation-Attempt-3'
    toc-text: 'Installation Attempt #3'
  - toc-url: 'Verified-Installation-of-CVUQDISK-Package'
    toc-text: 'Verified Installation of CVUQDISK Package'
  - toc-url: 'Verified-avahi-daemon-Active'
    toc-text: 'Verified avahi-daemon Active'
  - toc-url: 'Run-Root-Scripts'
    toc-text: 'Run Root Scripts'
  - toc-url: 'Check-ASM-Status'
    toc-text: 'Check ASM Status'
---
<div dir="ltr">
 <br/>
 <h2>
  <a name="TOC-Overview">
  </a>
  Overview
 </h2>
 <p>
  This is the third attempt at GI installation. I had already uninstalled GI.
 </p>
 <h2>
  <a name="TOC-References">
  </a>
  References
 </h2>
 <ul>
  <li>
   <a href="https://support.oracle.com/epmos/faces/DocContentDisplay?id=1377349.1" rel="nofollow">
    How to Deconfigure/Reconfigure(Rebuild OCR) or Deinstall Grid Infrastructure (Doc ID 1377349.1)
   </a>
  </li>
  <li>
   <a href="home/system-builds/redfern.html">
    REDFERN System Build
   </a>
  </li>
  <ul>
   <li>
    <a href="home/system-builds/redfern/2016-04-23-install-gi-12-1-0-2.html">
     Install GI 12.1.0.2
    </a>
   </li>
   <ul>
    <li>
     <a href="home/system-builds/redfern/2016-04-23-install-gi-12-1-0-2.html#TOC-Step-16:-Prerequisite-Checks">
      Step 16: Prerequisite Checks
     </a>
    </li>
    <li>
     <a href="home/system-builds/redfern/2016-04-23-install-gi-12-1-0-2.html#TOC-Step-18:-Install-Product">
      Step 18: Install Product
     </a>
    </li>
   </ul>
  </ul>
  <li>
   <a href="https://support.oracle.com/epmos/faces/DocContentDisplay?id=551051.1" rel="nofollow">
    Linux OS Service 'avahi-daemon' (Doc ID 551051.1)
   </a>
  </li>
 </ul>
 <h2>
  <a name="TOC-Procedure">
  </a>
  Procedure
 </h2>
 <h3>
  <a name="TOC-Installation-Attempt-3">
  </a>
  Installation Attempt #3
 </h3>
 <p>
  Followed my procedure in
  <a href="home/system-builds/redfern/2016-04-23-install-gi-12-1-0-2.html">
   Install GI 12.1.0.2
  </a>
  . However, at
  <a href="home/system-builds/redfern/2016-04-23-install-gi-12-1-0-2.html#TOC-Step-16:-Prerequisite-Checks">
   Step 16: Prerequisite Checks
  </a>
  , I ended up with the following errors:
 </p>
 <div style="display:block;text-align:left">
  <img border="0" src="home/system-builds/redfern/2017-12-02-gi-installation-attempt-3/10 step 16 Errors.png"/>
 </div>
 <br/>
 <p>
  The details of the errors were:
 </p>
 <div style="display:block;text-align:left">
  <img border="0" src="home/system-builds/redfern/2017-12-02-gi-installation-attempt-3/10 step 16 Error Details.png"/>
 </div>
 <br/>
 <h3>
  <a name="TOC-Verified-Installation-of-CVUQDISK-Package">
  </a>
  Verified Installation of CVUQDISK Package
 </h3>
 <p>
  I used the following command to verify the correct version of the
  <span style="font-family:monospace">
   cvuqdisk
  </span>
  was installed:
 </p>
 <pre class="bash-cmd">sudo yum list installed cvuqdisk*
</pre>
 <p>
  The following output confirmed that the package has been installed:
 </p>
 <pre class="text">Loaded plugins: ulninfo
Installed Packages
<span style="font-weight:bold">cvuqdisk.x86_64                        1.0.9-1                         installed</span>
</pre>
 <h3>
  <a name="TOC-Verified-avahi-daemon-Active">
  </a>
  Verified avahi-daemon Active
 </h3>
 <p>
  I used the following command to verify that the avahi-daemon was active:
 </p>
 <pre class="bash-cmd">sudo systemctl status avahi-daemon
</pre>
 <p>
  The following output confirmed that the daemon is running:
 </p>
 <pre class="text">• avahi-daemon.service - Avahi mDNS/DNS-SD Stack
   Loaded: loaded (/usr/lib/systemd/system/avahi-daemon.service; enabled; vendor preset: enabled)
   Active: active (running) since Sat 2017-12-02 13:46:01 AEDT; 5h 25min ago
 Main PID: 651 (avahi-daemon)
   Status: "avahi-daemon 0.6.31 starting up."
   CGroup: /system.slice/avahi-daemon.service
           ├─651 avahi-daemon: running [redfern1.local]
           └─660 avahi-daemon: chroot helper

Dec 02 13:46:13 redfern1.yaocm.id.au avahi-daemon[651]: New relevant interface eth1.IPv4 for mDNS.
Dec 02 13:46:13 redfern1.yaocm.id.au avahi-daemon[651]: Registering new address record for 192.168.2.140 on eth1.IPv4.
Dec 02 13:46:15 redfern1.yaocm.id.au avahi-daemon[651]: Registering new address record for fe80::216:3eff:fe00:10 on eth2.*.
Dec 02 13:46:17 redfern1.yaocm.id.au avahi-daemon[651]: Joining mDNS multicast group on interface eth2.IPv4 with address 192.168.3.140.
Dec 02 13:46:17 redfern1.yaocm.id.au avahi-daemon[651]: New relevant interface eth2.IPv4 for mDNS.
Dec 02 13:46:17 redfern1.yaocm.id.au avahi-daemon[651]: Registering new address record for 192.168.3.140 on eth2.IPv4.
Dec 02 13:46:20 redfern1.yaocm.id.au avahi-daemon[651]: Registering new address record for fe80::216:3eff:fe00:11 on eth3.*.
Dec 02 13:46:22 redfern1.yaocm.id.au avahi-daemon[651]: Joining mDNS multicast group on interface eth3.IPv4 with address 192.168.4.140.
Dec 02 13:46:22 redfern1.yaocm.id.au avahi-daemon[651]: New relevant interface eth3.IPv4 for mDNS.
Dec 02 13:46:22 redfern1.yaocm.id.au avahi-daemon[651]: Registering new address record for 192.168.4.140 on eth3.IPv4.
</pre>
 <p>
  However, the message returned by the installer is misleading. When I get the details, I see instead:
 </p>
 <div style="display:block;text-align:left">
  <img border="0" src="home/system-builds/redfern/2017-12-02-gi-installation-attempt-3/10 step 16 avahi-daemon errors.png"/>
 </div>
 <br/>
 <p>
  I fixed this by running the following command:
 </p>
 <pre class="bash-cmd">sudo systemctl stop avahi-daemon
</pre>
 <p>
  The output was:
 </p>
 <pre class="text">Warning: Stopping avahi-daemon.service, but it can still be activated by:
  avahi-daemon.socket
</pre>
 <p>
  I ignored the remaining prerequisites, and continued the installation.
 </p>
 <h3>
  <a name="TOC-Run-Root-Scripts">
  </a>
  Run Root Scripts
 </h3>
 <p>
  After the root scripts failed again in
  <a href="home/system-builds/redfern/2016-04-23-install-gi-12-1-0-2.html#TOC-Step-18:-Install-Product">
   Step 18: Install Product
  </a>
  , I decided to run the root script manually as follows:
 </p>
 <pre class="bash-cmd">sudo /opt/app/grid_infra/12.1.0/grid/root.sh
</pre>
 <p>
  The output was:
 </p>
 <pre class="text">Performing root user operation.

The following environment variables are set as:
    ORACLE_OWNER= oracle
    ORACLE_HOME=  /opt/app/grid_infra/12.1.0/grid

Enter the full pathname of the local bin directory: [/usr/local/bin]: 
The contents of "dbhome" have not changed. No need to overwrite.
The contents of "oraenv" have not changed. No need to overwrite.
The contents of "coraenv" have not changed. No need to overwrite.

Entries will be added to the /etc/oratab file as needed by
Database Configuration Assistant when a database is created
Finished running generic part of root script.
Now product-specific root actions will be performed.
Using configuration parameter file: /opt/app/grid_infra/12.1.0/grid/crs/install/crsconfig_params
2017/12/02 20:51:34 CLSRSC-4001: Installing Oracle Trace File Analyzer (TFA) Collector.

2017/12/02 20:51:59 CLSRSC-4002: Successfully installed Oracle Trace File Analyzer (TFA) Collector.

2017/12/02 20:52:01 CLSRSC-363: User ignored prerequisites during installation

OLR initialization - successful
  root wallet
  root wallet cert
  root cert export
  peer wallet
  profile reader wallet
  pa wallet
  peer wallet keys
  pa wallet keys
  peer cert request
  pa cert request
  peer cert
  pa cert
  peer root cert TP
  profile reader root cert TP
  pa root cert TP
  peer pa cert TP
  pa peer cert TP
  profile reader pa cert TP
  profile reader peer cert TP
  peer user cert
  pa user cert
2017/12/02 20:52:49 CLSRSC-330: Adding Clusterware entries to file 'oracle-ohasd.service'

CRS-4133: Oracle High Availability Services has been stopped.
CRS-4123: Oracle High Availability Services has been started.
CRS-4133: Oracle High Availability Services has been stopped.
CRS-4123: Oracle High Availability Services has been started.
CRS-2672: Attempting to start 'ora.evmd' on 'redfern1'
CRS-2672: Attempting to start 'ora.mdnsd' on 'redfern1'
CRS-2676: Start of 'ora.evmd' on 'redfern1' succeeded
CRS-2676: Start of 'ora.mdnsd' on 'redfern1' succeeded
CRS-2672: Attempting to start 'ora.gpnpd' on 'redfern1'
CRS-2676: Start of 'ora.gpnpd' on 'redfern1' succeeded
CRS-2672: Attempting to start 'ora.cssdmonitor' on 'redfern1'
CRS-2672: Attempting to start 'ora.gipcd' on 'redfern1'
CRS-2676: Start of 'ora.cssdmonitor' on 'redfern1' succeeded
CRS-2676: Start of 'ora.gipcd' on 'redfern1' succeeded
CRS-2672: Attempting to start 'ora.cssd' on 'redfern1'
CRS-2672: Attempting to start 'ora.diskmon' on 'redfern1'
CRS-2676: Start of 'ora.diskmon' on 'redfern1' succeeded
CRS-2676: Start of 'ora.cssd' on 'redfern1' succeeded

<span style="font-weight:bold">ASM created and started successfully.</span>

Disk Group VOTE created successfully.

2017/12/02 20:58:13 CLSRSC-12: The ASM resource ora.asm did not start

2017/12/02 20:58:14 CLSRSC-258: Failed to configure and start ASM

<span style="font-weight:bold">Died at /opt/app/grid_infra/12.1.0/grid/crs/install/crsinstall.pm line 2017.</span>
The command '/opt/app/grid_infra/12.1.0/grid/perl/bin/perl -I/opt/app/grid_infra/12.1.0/grid/perl/lib -I/opt/app/grid_infra/12.1.0/grid/crs/install /opt/app/grid_infra/12.1.0/grid/crs/install/rootcrs.pl ' execution failed
</pre>
 <p>
  This is not very helpful.
 </p>
 <h3>
  <a name="TOC-Check-ASM-Status">
  </a>
  Check ASM Status
 </h3>
 <p>
  Since the output of the root script said that ASM was started successfully, I checked the status of ASM by using the following command:
 </p>
 <pre class="bash-cmd">/opt/app/grid_infra/12.1.0/grid/bin/srvctl status asm
</pre>
 <p>
  The output was:
 </p>
 <pre class="text">PRCR-1070 : Failed to check if resource ora.asm is registered
<span style="font-weight:bold">CRS-0184 : Cannot communicate with the CRS daemon.</span>
</pre>
 <p>
  At this stage, I am unable to continue. I do not know what the underlying error is.
 </p>
</div>
