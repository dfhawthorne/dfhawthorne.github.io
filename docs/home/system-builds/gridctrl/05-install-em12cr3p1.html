---
layout: default
title: '05 Install EM12CR3p1'
base-url: home/system-builds/gridctrl/05-install-em12cr3p1.html
breadcrumbs:
- title: 'Home'
  url: index.html
- title: 'System Builds'
  url: home/system-builds.html
- title: 'GRIDCTRL'
  url: home/system-builds/gridctrl.html
- title: '05 Install EM12CR3p1'
  url: home/system-builds/gridctrl/05-install-em12cr3p1.html
scroll-bar:
  left-link:
    url: home/system-builds/gridctrl/04-install-db-psu-11-2-0-4-0.html
    title: '04 Install DB PSU 11.2.0.4.0'
  right-link:
    url: home/system-builds/gridctrl/06-set-up-xdcmp.html
    title: '06 Set up XDCMP'
table-of-contents:
- toc-url: 'Overview'
  toc-text: 'Overview'
- toc-url: 'References'
  toc-text: 'References'
- toc-url: 'Procedure'
  toc-text: 'Procedure'
  toc-menu:
  - toc-url: 'Choice-of-Installation-Type'
    toc-text: 'Choice of Installation Type'
  - toc-url: 'Start-the-Installation'
    toc-text: 'Start the Installation'
  - toc-url: 'Apply-the-Software-Updates'
    toc-text: 'Apply the Software Updates'
  - toc-url: 'Prerequisite-Warnings'
    toc-text: 'Prerequisite Warnings'
  - toc-url: 'Installation-Directories'
    toc-text: 'Installation Directories'
  - toc-url: 'Remove-Database-Control-from-REPOS'
    toc-text: 'Remove Database Control from REPOS'
    toc-menu:
    - toc-url: 'Error-Message-for-Database-Control-in-Repository-Database'
      toc-text: 'Error Message for Database Control in Repository Database'
    - toc-url: 'Change-SYSMAN-Password-and-Unlock-Account'
      toc-text: 'Change SYSMAN Password and Unlock Account'
    - toc-url: 'Deconfigure-Database-Control'
      toc-text: 'Deconfigure Database Control'
  - toc-url: 'Installation-Complete'
    toc-text: 'Installation Complete'
---
<div dir="ltr">
 <br/>
 <h2>
  <a name="TOC-Overview">
  </a>
  Overview
 </h2>
 <p>
  Because the upgrade path to 12.1.0.3 from 12.1.0.1 was not a path I was prepared to take as described in
  <a href="home/system-builds/gridctrl/02-upgrade-em12cr3p1-2.html">
   02 Upgrade EM12CR3p1 (2)
  </a>
  , and this was only a test system, I had no qualms about losing all of my OEM data and starting afresh.
 </p>
 <h2>
  <a name="TOC-References">
  </a>
  References
 </h2>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/E24628_01/install.121/e22624/toc.htm" rel="nofollow">
    Oracle® Enterprise Manager Cloud Control Basic Installation Guide 12c Release 3 (12.1.0.3)
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/E24628_01/install.121/e22624/install_em_exist_db.htm#BGBHDBCH" rel="nofollow">
     8 Installing an Enterprise Manager System
    </a>
   </li>
   <ul>
    <li>
     <a href="http://docs.oracle.com/cd/E24628_01/install.121/e22624/install_em_exist_db.htm#BGBFDDDG" rel="nofollow">
      8.1 Introduction
     </a>
    </li>
    <ul>
     <li>
      <a href="http://docs.oracle.com/cd/E24628_01/install.121/e22624/install_em_exist_db.htm#BDCICEHI" rel="nofollow">
       8.1.1 Overview of the Installation Types
      </a>
     </li>
    </ul>
    <li>
     <a href="http://docs.oracle.com/cd/E24628_01/install.121/e22624/install_em_exist_db.htm#CHDHFAHG" rel="nofollow">
      8.4 Installation Procedure
     </a>
    </li>
    <ul>
     <li>
      <a href="http://docs.oracle.com/cd/E24628_01/install.121/e22624/install_em_exist_db.htm#CHDHJIFD" rel="nofollow">
       8.4.1 Installing with Simple Configuration
      </a>
     </li>
    </ul>
   </ul>
  </ul>
 </ul>
 <h2>
  <a name="TOC-Procedure">
  </a>
  Procedure
 </h2>
 <h3>
  <a name="TOC-Choice-of-Installation-Type">
  </a>
  Choice of Installation Type
 </h3>
 <p>
  Following the advice given in
  <a href="http://docs.oracle.com/cd/E24628_01/install.121/e22624/install_em_exist_db.htm#BDCICEHI" rel="nofollow">
   8.1.1 Overview of the Installation Types
  </a>
  , I choose the
  <span style="font-weight:bold">
   Simple
  </span>
  installation type because this type was:
 </p>
 <blockquote>
  Meant for demo or evaluation purposes, and small deployments, and when you do not want to worry about the granular control of the installer and want to install the Enterprise Manager system quickly, with less memory, and for monitoring fewer targets in their environment
 </blockquote>
 <h3>
  <a name="TOC-Start-the-Installation">
  </a>
  Start the Installation
 </h3>
 <p>
  Following the procedure described in
  <a href="http://docs.oracle.com/cd/E24628_01/install.121/e22624/install_em_exist_db.htm#CHDHJIFD" rel="nofollow">
   8.4.1 Installing with Simple Configuration
  </a>
  , I ran the following commands:
 </p>
 <blockquote style="font-family:monospace">
  cd /opt/oracle/software/em12103p1
  <br/>
  ./runInstaller
 </blockquote>
 <h3>
  <a name="TOC-Apply-the-Software-Updates">
  </a>
  Apply the Software Updates
 </h3>
 <p>
  The following software updates were found:
 </p>
 <table border="1">
  <thead>
   <tr>
    <th>
     Patch No.
    </th>
    <th>
     Metalink Note
    </th>
    <th>
     Description
    </th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td>
     17486746
    </td>
    <td>
     1099123.1
    </td>
    <td>
     Grid Control (OMS) Patch
    </td>
   </tr>
   <tr>
    <td>
     17046845
    </td>
    <td>
     1099123.1
    </td>
    <td>
     Software Update patch for EM 12.1.0.3
    </td>
   </tr>
  </tbody>
 </table>
 <p>
  The installer restarted,
 </p>
 <h3>
  <a name="TOC-Prerequisite-Warnings">
  </a>
  Prerequisite Warnings
 </h3>
 <p>
  Two (2) warnings were raised:
 </p>
 <blockquote style="font-family:monospace">
  Checking for sufficient physical memory...
  <br/>
  Description:
  <br/>
  This is a prerequisite condition to test whether the system has sufficient physical memory.
  <br/>
  <br/>
  Expected result: 3900MB
  <br/>
  Actual Result: 3024MB
  <br/>
  Check complete. The overall result of this check is: Failed &lt;&lt;&lt;&lt;
  <br/>
  <br/>
  <br/>
  Recommendation:
  <br/>
  Upgrade the memory for your system in order for Oracle software to function.
  <br/>
  Checking for sufficient swap space...
  <br/>
  Description:
  <br/>
  This is a prerequisite condition to test whether the sufficient swapspace is available to perform the install.
  <br/>
  <br/>
  Expected result: 4096MB
  <br/>
  Actual Result: 4031MB
  <br/>
  Check complete. The overall result of this check is: Failed &lt;&lt;&lt;&lt;
  <br/>
  <br/>
  <br/>
  Recommendation:
  <br/>
  Make more swap space available to perform the install.
  <br/>
 </blockquote>
 <p>
  Both of these warnings were ignored.
 </p>
 <h3>
  <a name="TOC-Installation-Directories">
  </a>
  Installation Directories
 </h3>
 <p>
  Used the following installation directories during step #12:
 </p>
 <table>
  <tbody>
   <tr>
    <td style="font-family:monospace">
     /opt/oracle/app/middleware/12.1.0.3
    </td>
   </tr>
   <tr>
    <td style="font-family:monospace">
     /opt/oracle/app/agent/12.1.0.3
    </td>
   </tr>
  </tbody>
 </table>
 <h3>
  <a name="TOC-Remove-Database-Control-from-REPOS">
  </a>
  Remove Database Control from REPOS
 </h3>
 <h4>
  <a name="TOC-Error-Message-for-Database-Control-in-Repository-Database">
  </a>
  Error Message for Database Control in Repository Database
 </h4>
 <p>
  During the installation, the following message was displayed:
 </p>
 <blockquote style="font-family:monospace">
  Enterprise Manager Database Control schema exists in the database. To proceed with the installation of Enterprise Manager Cloud Control, you must deconfigure the same by running the following command:
  <br/>
  <br/>
  To deconfigure Database Control for a single instance database, do the following command on database host:
  <br/>
  (a) Set the environment variable &lt;ORACLE_HOME&gt; to the database home.(b) Run the following command:
  <br/>
  &lt;Database ORACLE HOME&gt;/bin/emca -deconfig dbcontrol db -repos drop -SYS_PWD &lt;sys password&gt; -SYSMAN_PWD &lt;sysman password&gt;
  <br/>
  <br/>
  To deconfigure Database Control for an Real Application Clusters (RAC) database, do the following command on database host:
  <br/>
  (a) Set the environment variable &lt;ORACLE_HOME&gt; to the database home.(b) Run the following command:
  <br/>
  &lt;Database ORACLE HOME&gt;/bin/emca -deconfig dbcontrol db -repos drop -cluster -SYS_PWD &lt;sys password&gt; -SYSMAN_PWD &lt;sysman password&gt;
  <br/>
  <br/>
  NOTE: If the existing database is on different host, then install Oracle Management Agent on the database host, to monitor the database.
  <br/>
 </blockquote>
 <h4>
  <a name="TOC-Change-SYSMAN-Password-and-Unlock-Account">
  </a>
  Change SYSMAN Password and Unlock Account
 </h4>
 <p>
  I had to change the password for
  <span style="font-family:monospace">
   SYSMAN
  </span>
  in
  <span style="font-family:monospace">
   REPOS
  </span>
  as follows:
 </p>
 <blockquote style="font-family:monospace">
  [oracle@gridctrl em12103p1]$ sqlplus / as sysdba
  <br/>
  <br/>
  SQL*Plus: Release 11.2.0.4.0 Production on Sat Feb 1 10:58:07 2014
  <br/>
  <br/>
  Copyright (c) 1982, 2013, Oracle.  All rights reserved.
  <br/>
  <br/>
  <br/>
  Connected to:
  <br/>
  Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - Production
  <br/>
  With the Partitioning, OLAP, Data Mining and Real Application Testing options
  <br/>
  <br/>
  SQL&gt; password sysman
  <br/>
  Changing password for sysman
  <br/>
  New password:
  <br/>
  Retype new password:
  <br/>
  Password changed
  <br/>
  SQL&gt; alter user sysman account unlock;
  <br/>
  <br/>
  User altered.
  <br/>
  <br/>
  SQL&gt; exit
  <br/>
  Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - Production
  <br/>
  With the Partitioning, OLAP, Data Mining and Real Application Testing options
 </blockquote>
 <h4>
  <a name="TOC-Deconfigure-Database-Control">
  </a>
  Deconfigure Database Control
 </h4>
 <p>
  Deconfigure Database Control, I ran the following command:
 </p>
 <blockquote style="font-family:monospace">
  emca -deconfig dbcontrol db -repos drop -SYS_PWD ********* -SYSMAN_PWD *********
 </blockquote>
 <p>
  The log for deconfiguration is as follows:
 </p>
 <blockquote style="font-family:monospace">
  STARTED EMCA at Feb 1, 2014 10:59:06 AM
  <br/>
  EM Configuration Assistant, Version 11.2.0.3.0 Production
  <br/>
  Copyright (c) 2003, 2011, Oracle.  All rights reserved.
  <br/>
  <br/>
  Enter the following information:
  <br/>
  Database SID: repos
  <br/>
  Listener port number: 1521
  <br/>
  <br/>
  ----------------------------------------------------------------------
  <br/>
  WARNING : While repository is dropped the database will be put in quiesce mode.
  <br/>
  ----------------------------------------------------------------------
  <br/>
  Do you wish to continue? [yes(Y)/no(N)]: Y
  <br/>
  Feb 1, 2014 10:59:27 AM oracle.sysman.emcp.EMConfig perform
  <br/>
  INFO: This operation is being logged at /opt/oracle/app/cfgtoollogs/emca/repos/emca_2014_02_01_10_59_06.log.
  <br/>
  Feb 1, 2014 10:59:27 AM oracle.sysman.emcp.EMDBPreConfig performDeconfiguration
  <br/>
  WARNING: EM is not configured for this database. No EM-specific actions can be performed. Some of the possible reasons may be:
  <br/>
  1) EM is configured with different hostname then physical host. Set environment variable ORACLE_HOSTNAME=&lt;hostname&gt; and re-run EMCA script
  <br/>
  2) ORACLE_HOSTNAME is set. Unset it and re-run EMCA script
  <br/>
  Feb 1, 2014 10:59:27 AM oracle.sysman.emcp.EMReposConfig invoke
  <br/>
  INFO: Dropping the EM repository (this may take a while) ...
  <br/>
  Feb 1, 2014 11:01:16 AM oracle.sysman.emcp.EMReposConfig invoke
  <br/>
  INFO: Repository successfully dropped
  <br/>
  Enterprise Manager configuration completed successfully
  <br/>
  FINISHED EMCA at Feb 1, 2014 11:01:16 AM
  <br/>
 </blockquote>
 <h3>
  <a name="TOC-Installation-Complete">
  </a>
  Installation Complete
 </h3>
 <p>
  The installation finally completed with the following messages:
 </p>
 <blockquote style="font-family:monospace">
  This information is also available at:
  <br/>
  <br/>
  /opt/oracle/app/middleware/12.1.0.3/oms/install/setupinfo.txt
  <br/>
  <br/>
  See below for information pertaining to your Enterprise Manager installation:
  <br/>
  <br/>
  <br/>
  Use the following URL to access:
  <br/>
  <br/>
  1. Enterprise Manager Cloud Control URL: https://gridctrl.yaocm.id.au:7801/em
  <br/>
  2. Admin Server URL: https://gridctrl.yaocm.id.au:7102/console
  <br/>
  <br/>
  The following details need to be provided during the additional OMS install:
  <br/>
  <br/>
  1. Admin Server Hostname: gridctrl.yaocm.id.au
  <br/>
  2. Admin Server Port: 7102
  <br/>
  <br/>
  You can find the ports details used by this deployment at : /opt/oracle/app/middleware/12.1.0.3/oms/install/portlist.ini
  <br/>
  <br/>
  <br/>
  NOTE:
  <br/>
  An encryption key has been generated to encrypt sensitive data in the Management Repository. If this key is lost, all encrypted data in the Repository becomes unusable.
  <br/>
  <br/>
  A backup of the OMS configuration is available in /opt/oracle/app/middleware/gc_inst/em/EMGC_OMS1/sysman/backup on host gridctrl.yaocm.id.au. See Cloud Control Administrators Guide for details on how to back up and recover an OMS.
  <br/>
  <br/>
  NOTE: This backup is valid only for the initial OMS configuration. For example, it will not reflect plug-ins installed later, topology changes like the addition of a load balancer, or changes to other properties made using emctl or emcli. Backups should be created on a regular basis to ensure they capture the current OMS configuration. Use the following command to backup the OMS configuration:
  <br/>
  /opt/oracle/app/middleware/12.1.0.3/oms/bin/emctl exportconfig oms -dir &lt;backup dir&gt;
  <br/>
 </blockquote>
</div>
