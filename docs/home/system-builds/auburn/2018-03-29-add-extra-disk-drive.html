---
layout: default
title: '2018-03-29 Add Extra Disk Drive'
base-url: home/system-builds/auburn/2018-03-29-add-extra-disk-drive.html
breadcrumbs:
- title: 'Home'
  url: index.html
- title: 'System Builds'
  url: home/system-builds.html
- title: 'AUBURN'
  url: home/system-builds/auburn.html
- title: '2018-03-29 Add Extra Disk Drive'
  url: home/system-builds/auburn/2018-03-29-add-extra-disk-drive.html
scroll-bar:
  left-link:
    url: home/system-builds/auburn/2018-03-27-create-git-repository.html
    title: '2018-03-27 Create GIT Repository'
  right-link:
    url: home/system-builds/auburn/2020-01-02-upgrade-to-python3-for-ansible.html
    title: '2020-01-02 Upgrade to Python3 for Ansible'
table-of-contents:
- toc-url: 'Overview'
  toc-text: 'Overview'
- toc-url: 'References'
  toc-text: 'References'
  toc-menu:
  - toc-url: 'Ubuntu-Documentation'
    toc-text: 'Ubuntu Documentation'
- toc-url: 'XEN-Documentation'
  toc-text: 'XEN Documentation'
- toc-url: 'Procedure'
  toc-text: 'Procedure'
  toc-menu:
  - toc-url: 'Shutdown-AUBURN'
    toc-text: 'Shutdown AUBURN'
  - toc-url: 'Create-New-Disk-Drive'
    toc-text: 'Create New Disk Drive'
  - toc-url: 'Update-Configuration-File'
    toc-text: 'Update Configuration File'
  - toc-url: 'Start-AUBURN'
    toc-text: 'Start AUBURN'
  - toc-url: 'Detect-LVM-Volumes'
    toc-text: 'Detect LVM Volumes'
  - toc-url: 'Create-Physical-Volume'
    toc-text: 'Create Physical Volume'
  - toc-url: 'Extend-Logical-Volume-to-New-Physical-Volume'
    toc-text: 'Extend Logical Volume to New Physical Volume'
  - toc-url: 'First-Attempt-to-Resize-Root-Logical-Volume'
    toc-text: 'First Attempt to Resize Root Logical Volume'
  - toc-url: 'Second-Attempt-to-Resize-Root-Logical-Volume'
    toc-text: 'Second Attempt to Resize Root Logical Volume'
  - toc-url: 'Determine-Device-Name-for-Root-Logical-Volume'
    toc-text: 'Determine Device Name for Root Logical Volume'
  - toc-url: 'Resize-Root-File-System'
    toc-text: 'Resize Root File System'
  - toc-url: 'Verify-Size-of-Root-File-System'
    toc-text: 'Verify Size of Root File System'
---
<div dir="ltr">
<br/>
<div>
<div class="sites-embed-align-left-wrapping-off">
<div class="sites-embed-border-off sites-embed sites-embed-full-width" style="width:100%;">
<div class="sites-embed-content sites-embed-type-toc">

</div>
</div>
</div>
</div>
<br/>
<h2>
<a name="TOC-Overview">
</a>
  Overview
 </h2>
<p>
  Finallly ran out of space on the root disk. Had to add extra disk space.
 </p>
<h2>
<a name="TOC-References">
</a>
  References
 </h2>
<h3>
<a name="TOC-Ubuntu-Documentation">
</a>
  Ubuntu Documentation
 </h3>
<ul>
<li>
<a href="http://manpages.ubuntu.com/manpages/xenial/en/" rel="nofollow">
    Ubuntu 16.04 Man Pages
   </a>
</li>
<ul>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/cd.1posix.html" rel="nofollow">
     cd
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/dd.1posix.html" rel="nofollow">
     dd
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/df.1posix.html" rel="nofollow">
     df
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/diff.1.html" rel="nofollow">
     diff
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/fsadm.8.html" rel="nofollow">
     fsadm
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/ls.1posix.html" rel="nofollow">
     ls
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/lvdisplay.8.html" rel="nofollow">
     lvdisplay
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/lvresize.8.html" rel="nofollow">
     lvresize
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/pvcreate.8.html" rel="nofollow">
     pvcreate
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/sudo.8.html" rel="nofollow">
     sudo
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/systemctl.1.html" rel="nofollow">
     systemctl
    </a>
</li>
<li style="font-family:monospace">
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/vgextend.8.html" rel="nofollow">
     vgextend
    </a>
</li>
</ul>
</ul>
<h2>
<a name="TOC-XEN-Documentation">
</a>
  XEN Documentation
 </h2>
<ul>
<li>
<a href="http://xenbits.xen.org/docs/4.2-testing/man/xl.1.html" rel="nofollow">
    xl
   </a>
</li>
</ul>
<h2>
<a name="TOC-Procedure">
</a>
  Procedure
 </h2>
<h3>
<a name="TOC-Shutdown-AUBURN">
</a>
  Shutdown AUBURN
 </h3>
<p>
  On
  <a href="home/system-builds/auburn.html" style="font-family:monospace">
   AUBURN
  </a>
  , ran the following command:
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/sudo.8.html" rel="nofollow">sudo</a> <a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/systemctl.1.html" rel="nofollow">systemctl</a> poweroff
</pre>
<h3>
<a name="TOC-Create-New-Disk-Drive">
</a>
  Create New Disk Drive
 </h3>
<p>
  On
  <a href="home/system-builds/victoria.html" style="font-family:monospace">
   VICTORIA
  </a>
  , ran the following commands:
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/cd.1posix.html" rel="nofollow">cd</a> /OVS/running_pool/AUBURN
<a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/dd.1posix.html" rel="nofollow">dd</a> if=/dev/zero of=user.dsk bs=1G count=10
</pre>
<p>
  The output was:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">10+0 records in
10+0 records out
10737418240 bytes (11 GB) copied, 1111.49 s, 9.7 MB/s
</pre>
<h3>
<a name="TOC-Update-Configuration-File">
</a>
  Update Configuration File
 </h3>
<p>
  On
  <a href="home/system-builds/victoria.html" style="font-family:monospace">
   VICTORIA
  </a>
  , changes were made to
  <span style="font-family:monospace">
   /OVS/running_pool/AUBURN/auburn.cfg
  </span>
  as discovered by the following command:
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/diff.1.html" rel="nofollow">diff</a> auburn.cfg auburn.cfg_20180329
</pre>
<p>
  The output was:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">44,45c44
&lt; #   ,'/OVS/iso_pool/ubuntu-16.04.3-server-amd64.iso,raw,xvdc,ro,cdrom'
&lt;     ,'/OVS/running_pool/AUBURN/user.dsk,raw,xvdd,rw'
---
&gt;     ,'/OVS/iso_pool/ubuntu-16.04.3-server-amd64.iso,raw,xvdc,ro,cdrom'
</pre>
<h3>
<a name="TOC-Start-AUBURN">
</a>
  Start AUBURN
 </h3>
<p>
  On
  <a href="home/system-builds/victoria.html" style="font-family:monospace">
   VICTORIA
  </a>
  , ran the following commands:
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/cd.1posix.html" rel="nofollow">cd</a> /OVS/running_pool/AUBURN
<a href="http://xenbits.xen.org/docs/4.2-testing/man/xl.1.html" rel="nofollow">xl</a> create auburn.cfg
</pre>
<p>
  The output was:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">Parsing config from auburn.cfg
got a tsc mode string: "default"
</pre>
<h3>
<a name="TOC-Detect-LVM-Volumes">
</a>
  Detect LVM Volumes
 </h3>
<p>
  Followed the procedure at
  <a href="home/system-builds/cronulla/05-add-extra-disk-space.html">
   05 Add Extra Disk Space
  </a>
  .
 </p>
<p>
  On
  <a href="home/system-builds/auburn.html" style="font-family:monospace">
   AUBURN
  </a>
  , ran the following command to detect existing LVM volumes:
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/sudo.8.html" rel="nofollow">sudo</a> <a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/lvdisplay.8.html" rel="nofollow">lvdisplay</a>
</pre>
<p>
  The output was:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">[sudo] password for douglas: 
  --- Logical volume ---
  LV Path                /dev/auburn-vg/root
  LV Name                root
  VG Name                auburn-vg
  LV UUID                m2hs2W-Xkmu-oFwp-nKEp-5YWP-Z6u5-XqdLNl
  LV Write Access        read/write
  LV Creation host, time auburn, 2018-03-05 18:43:18 +1100
  LV Status              available
  # open                 1
  LV Size                2.40 GiB
  Current LE             614
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           252:0
   
  --- Logical volume ---
  LV Path                /dev/auburn-vg/swap_1
  LV Name                swap_1
  VG Name                auburn-vg
  LV UUID                V8Y2Gz-q0Bw-v8vv-05rH-K335-A04J-H9M6KX
  LV Write Access        read/write
  LV Creation host, time auburn, 2018-03-05 18:43:18 +1100
  LV Status              available
  # open                 2
  LV Size                2.12 GiB
  Current LE             543
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           252:1
</pre>
<p>
  There is a logical volume group,
  <span style="font-family:monospace">
   auburn-vg
  </span>
  , and two (2) logical volumes:
 </p>
<ol>
<li style="font-family:monospace">
   /dev/auburn-vg/root
  </li>
<li style="font-family:monospace">
   /dev/auburn-vg/swap_1
  </li>
</ol>
<p>
  It is the first logical volume,
  <span style="font-family:monospace">
   /dev/auburn-vg/root
  </span>
  , that needs to be increased in size.
 </p>
<h3>
<a name="TOC-Create-Physical-Volume">
</a>
  Create Physical Volume
 </h3>
<p>
  Followed the procedure at
  <a href="home/system-builds/cronulla/05-add-extra-disk-space.html">
   05 Add Extra Disk Space
  </a>
  .
 </p>
<p>
  On
  <a href="home/system-builds/auburn.html" style="font-family:monospace">
   AUBURN
  </a>
  , ran the following command to create a physical volume on
  <span style="font-family:monospace">
   /dev/xvdd
  </span>
  :
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/sudo.8.html" rel="nofollow">sudo</a> <a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/pvcreate.8.html" rel="nofollow">pvcreate</a> /dev/xvdd
</pre>
<p>
  The output was:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">[sudo] password for douglas: 
  Physical volume "/dev/xvdd" successfully created
</pre>
<h3>
<a name="TOC-Extend-Logical-Volume-to-New-Physical-Volume">
</a>
  Extend Logical Volume to New Physical Volume
 </h3>
<p>
  Followed the procedure at
  <a href="home/system-builds/cronulla/05-add-extra-disk-space.html">
   05 Add Extra Disk Space
  </a>
  .
 </p>
<p>
  On
  <a href="home/system-builds/auburn.html" style="font-family:monospace">
   AUBURN
  </a>
  , ran the following command to extend the logical volume group,
  <span style="font-family:monospace">
   auburn-vg
  </span>
  , to include the new physical volume on
  <span style="font-family:monospace">
   /dev/xvdd
  </span>
  :
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/sudo.8.html" rel="nofollow">sudo</a> <a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/vgextend.8.html" rel="nofollow">vgextend</a> auburn-vg /dev/xvdd
</pre>
<p>
  The output was:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">  Volume group "auburn-vg" successfully extended
</pre>
<h3>
<a name="TOC-First-Attempt-to-Resize-Root-Logical-Volume">
</a>
  First Attempt to Resize Root Logical Volume
 </h3>
<p>
  Followed the procedure at
  <a href="home/system-builds/cronulla/05-add-extra-disk-space.html">
   05 Add Extra Disk Space
  </a>
  .
 </p>
<p>
  On
  <a href="home/system-builds/auburn.html" style="font-family:monospace">
   AUBURN
  </a>
  , ran the following command to resize the root logical volume,
  <span style="font-family:monospace">
   auburn-vg/root
  </span>
  , by 10GB:
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/sudo.8.html" rel="nofollow">sudo</a> <a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/lvresize.8.html" rel="nofollow">lvresize</a> --size +10G auburn-vg/root
</pre>
<p>
  The command failed with the following output:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">  Insufficient free space: 2560 extents needed, but only 2559 available
</pre>
<h3>
<a name="TOC-Second-Attempt-to-Resize-Root-Logical-Volume">
</a>
  Second Attempt to Resize Root Logical Volume
 </h3>
<p>
  Followed the procedure at
  <a href="home/system-builds/cronulla/05-add-extra-disk-space.html">
   05 Add Extra Disk Space
  </a>
  .
 </p>
<p>
  On
  <a href="home/system-builds/auburn.html" style="font-family:monospace">
   AUBURN
  </a>
  , ran the following command to resize the root logical volume,
  <span style="font-family:monospace">
   auburn-vg/root
  </span>
  , by 9GB:
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/sudo.8.html" rel="nofollow">sudo</a> <a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/lvresize.8.html" rel="nofollow">lvresize</a> --size +9G auburn-vg/root
</pre>
<p>
  The output was:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">  Size of logical volume auburn-vg/root changed from 2.40 GiB (614 extents) to 11.40 GiB (2918 extents).
  Logical volume root successfully resized.
</pre>
<h3>
<a name="TOC-Determine-Device-Name-for-Root-Logical-Volume">
</a>
  Determine Device Name for Root Logical Volume
 </h3>
<p>
  Followed the procedure at
  <a href="home/system-builds/cronulla/05-add-extra-disk-space.html">
   05 Add Extra Disk Space
  </a>
  .
 </p>
<p>
  On
  <a href="home/system-builds/auburn.html" style="font-family:monospace">
   AUBURN
  </a>
  , ran the following command to determine the device name for the root logical volume,
  <span style="font-family:monospace">
   auburn-vg/root
  </span>
  :
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/ls.1posix.html" rel="nofollow">ls</a> /dev/mapper
</pre>
<p>
  The output was:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">auburn--vg-root  auburn--vg-swap_1  control
</pre>
<p>
  The obvious candidate is
  <span style="font-family:monospace">
   /dev/mapper/auburn--vg-root
  </span>
  .
 </p>
<h3>
<a name="TOC-Resize-Root-File-System">
</a>
  Resize Root File System
 </h3>
<p>
  Followed the procedure at
  <a href="home/system-builds/cronulla/05-add-extra-disk-space.html">
   05 Add Extra Disk Space
  </a>
  .
 </p>
<p>
  On
  <a href="home/system-builds/auburn.html" style="font-family:monospace">
   AUBURN
  </a>
  , ran the following command to resize the root file system on the root logical volume,
  <span style="font-family:monospace">
   auburn-vg/root
  </span>
  :
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/sudo.8.html" rel="nofollow">sudo</a> <a href="http://manpages.ubuntu.com/manpages/xenial/en/man8/fsadm.8.html" rel="nofollow">fsadm</a> resize /dev/mapper/auburn--vg-root
</pre>
<p>
  The output was:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">resize2fs 1.42.13 (17-May-2015)
Filesystem at /dev/mapper/auburn--vg-root is mounted on /; on-line resizing required
old_desc_blocks = 1, new_desc_blocks = 1
The filesystem on /dev/mapper/auburn--vg-root is now 2988032 (4k) blocks long.
</pre>
<h3>
<a name="TOC-Verify-Size-of-Root-File-System">
</a>
  Verify Size of Root File System
 </h3>
<p>
  Followed the procedure at
  <a href="home/system-builds/cronulla/05-add-extra-disk-space.html">
   05 Add Extra Disk Space
  </a>
  .
 </p>
<p>
  On
  <a href="home/system-builds/auburn.html" style="font-family:monospace">
   AUBURN
  </a>
  , ran the following command to verify the new size the root file system:
 </p>
<pre style="background-color:lawngreen;border:5px groove black;margin-left:10px;padding:2px"><a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/df.1posix.html" rel="nofollow">df</a> -hlP /
</pre>
<p>
  The output was:
 </p>
<pre style="background-color:aqua;border:5px groove black;margin-left:10px;padding:2px">Filesystem                   Size  Used Avail Use% Mounted on
/dev/mapper/auburn--vg-root   12G  2.2G  8.6G  21% /
</pre>
<br/>
</div>
