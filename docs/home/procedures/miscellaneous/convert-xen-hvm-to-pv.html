---
layout: default
title: 'Convert XEN HVM to PV'
base-url: home/procedures/miscellaneous/convert-xen-hvm-to-pv.html
breadcrumbs:
- title: 'Home'
  url: index.html
- title: 'Procedures'
  url: home/procedures.html
- title: 'Miscellaneous'
  url: home/procedures/miscellaneous.html
- title: 'Convert XEN HVM to PV'
  url: home/procedures/miscellaneous/convert-xen-hvm-to-pv.html
table-of-contents:
- toc-url: 'Overview'
  toc-text: 'Overview'
- toc-url: 'Rationale'
  toc-text: 'Rationale'
- toc-url: 'Restrictions'
  toc-text: 'Restrictions'
- toc-url: 'Procedure'
  toc-text: 'Procedure'
  toc-menu:
  - toc-url: 'Disable-HVM-Mode'
    toc-text: 'Disable HVM Mode'
  - toc-url: 'Enable-PV-Mode'
    toc-text: 'Enable PV Mode'
  - toc-url: 'Verification'
    toc-text: 'Verification'
---

<!-- {% raw %} -->
<div dir="ltr">

<br/>
<h2>
<a name="TOC-Overview">
</a>
                    Overview
                   </h2>
<p>
                    This procedure gives a very simple way of converting a HVM Xen image to paravirtualised (PV) one.
                   </p>
<h2>
<a name="TOC-Rationale">
</a>
                    Rationale
                   </h2>
<p>
                    Most current operating systems have paravirtualisation support built-in, and they are able to detect whether theye are running in either HVM or PV mode.
                   </p>
<p>
                    Installing an operating system is easier from an ISO image with HVM mode.
                   </p>
<p>
                    The following operating systems have been tested with this procedure:
                   </p>
<ul>
<li>
                     Ubuntu 16.04 LTS Desktop
                    </li>
<li>
                     Ubuntu 16.04 LTS Server
                    </li>
</ul>
<h2>
<a name="TOC-Restrictions">
</a>
                    Restrictions
                   </h2>
<p>
<a href="https://docs.oracle.com/cd/E50245_01/E67966/html/vmrns-bugs-vm-ol7-rhel7-pv.html" rel="nofollow">
                     6.70 Oracle Linux 7 and RedHat Enterprise Linux 7 Not Supported For PV Guests
                    </a>
                    says:
                   </p>
<blockquote>
<p>
                     Although Oracle Linux 7 and RedHat Enterprise Linux (RHEL) 7 are supported for both hardware virtualization (HVM) and hardware virtualization with paravirtual drivers (PVHVM), it is not possible to run either of these operating systems as paravirtualized domains (PVM). This is due to kernel restrictions in both Oracle Linux 7 and RHEL 7.
                    </p>
</blockquote>
<h2>
<a name="TOC-Procedure">
</a>
                    Procedure
                   </h2>
<h3>
<a name="TOC-Disable-HVM-Mode">
</a>
                    Disable HVM Mode
                   </h3>
<p>
                    Disable HVM mode by removing the following line from the Xen configuration file:
                   </p>
<pre class="text">builder="hvm"
</pre>
<h3>
<a name="TOC-Enable-PV-Mode">
</a>
                    Enable PV Mode
                   </h3>
<p>
                    Enable PV mode by adding the following lines to the Xen configuration file:
                   </p>
<pre class="text">type="pv"
bootloader="pygrub"
</pre>
<h3>
<a name="TOC-Verification">
</a>
                    Verification
                   </h3>
<p>
                    After the Xen image has been started, run the following command:
                   </p>
<pre class="bash-cmd">dmesg|grep -i paravirtual
</pre>
<p>
                    The output should be similar to the following:
                   </p>
<pre class="text">[    0.000000] Booting <span style="font-weight:bold;color:red">paravirtual</span>ized kernel on Xen
</pre>
</div>
<!-- {% endraw %} -->
