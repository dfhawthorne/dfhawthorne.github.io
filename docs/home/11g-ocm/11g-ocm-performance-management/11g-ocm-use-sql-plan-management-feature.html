---
layout: default
title: '11G OCM Use SQL Plan Management feature'
base-url: home/11g-ocm/11g-ocm-performance-management/11g-ocm-use-sql-plan-management-feature.html
breadcrumbs:
- title: 'Home'
  url: home.html
- title: '11G OCM'
  url: home/11g-ocm.html
- title: '11G OCM Performance Management'
  url: home/11g-ocm/11g-ocm-performance-management.html
- title: '11G OCM Use SQL Plan Management feature'
  url: home/11g-ocm/11g-ocm-performance-management/11g-ocm-use-sql-plan-management-feature.html
table-of-contents:
- toc-url: References
  toc-text: References
- toc-url: Overview
  toc-text: Overview
- toc-url: Reading-Notes
  toc-text: Reading Notes
  toc-menu:
  - toc-url: SQL-Plan-Management-and-Control-of-SQL-Plan-Baselines
    toc-text: SQL Plan Management and Control of SQL Plan Baselines
  - toc-url: SQL-Plan-Management
    toc-text: SQL Plan Management
  - toc-url: Capturing-SQL-Plan-Baselines
    toc-text: Capturing SQL Plan Baselines
  - toc-url: Automatic-Plan-Capture
    toc-text: Automatic Plan Capture
  - toc-url: Selecting-SQL-Plan-Baselines
    toc-text: Selecting SQL Plan Baselines
  - toc-url: Evolving-SQL-Plan-Baselines
    toc-text: Evolving SQL Plan Baselines
    toc-menu:
    - toc-url: Evolving-Plans-With-Manual-Plan-Loading
      toc-text: Evolving Plans With Manual Plan Loading
    - toc-url: Evolving-Plans-With-DBMS_SPM.EVOLVE_SQL_PLAN_BASELINE
      toc-text: Evolving Plans With DBMS_SPM.EVOLVE_SQL_PLAN_BASELINE
  - toc-url: Using-SQL-Plan-Baselines-with-the-SQL-Tuning-Advisor
    toc-text: Using SQL Plan Baselines with the SQL Tuning Advisor
  - toc-url: Using-Fixed-SQL-Plan-Baselines
    toc-text: Using Fixed SQL Plan Baselines
- toc-url: Test-Case
  toc-text: Test Case
- toc-url: Procedure
  toc-text: Procedure
  toc-menu:
  - toc-url: Check-Status-of-SQL-Plan-Baselines
    toc-text: Check Status of SQL Plan Baselines
  - toc-url: Enable-SQL-Plan-Baselines
    toc-text: Enable SQL Plan Baselines
  - toc-url: Load-Plans-From-SQL-Tuning-Set
    toc-text: Load Plans From SQL Tuning Set
  - toc-url: Displaying-SQL-Plan-Baselines
    toc-text: Displaying SQL Plan Baselines
---
<div dir="ltr">
 <h3>
  <a name="TOC-References">
  </a>
  References
 </h3>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#insertedID0" rel="nofollow">
   Oracle® Database Performance Tuning Guide 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#insertedID0" rel="nofollow">
    Chapter 15, "Using SQL Plan Management"
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#CHDCFBAA" rel="nofollow">
     Managing SQL Plan Baselines
    </a>
   </li>
   <ul>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABEIGAI" rel="nofollow">
      Capturing SQL Plan Baselines
     </a>
    </li>
    <ul>
     <li>
      <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABBJAAE" rel="nofollow">
       Automatic Plan Capture
      </a>
     </li>
     <li>
      <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABEIHJC" rel="nofollow">
       Manual Plan Loading
      </a>
     </li>
    </ul>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABBECCH" rel="nofollow">
      Selecting SQL Plan Baselines
     </a>
    </li>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABGIBEJ" rel="nofollow">
      Evolving SQL Plan Baselines
     </a>
    </li>
    <ul>
     <li>
      <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABIAHJI" rel="nofollow">
       Evolving Plans With Manual Plan Loading
      </a>
     </li>
     <li>
      <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABEEHHC" rel="nofollow">
       Evolving Plans With
       <span style="font-family:monospace">
        DBMS_SPM.EVOLVE_SQL_PLAN_BASELINE
       </span>
      </a>
     </li>
    </ul>
   </ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABJIFII" rel="nofollow">
     Using SQL Plan Baselines with the SQL Tuning Advisor
    </a>
   </li>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABICJBG" rel="nofollow">
     Using Fixed SQL Plan Baselines
    </a>
   </li>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#CHDGGECE" rel="nofollow">
     Displaying SQL Plan Baselines
    </a>
   </li>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#CHDDAEIC" rel="nofollow">
     SQL Management Base
    </a>
   </li>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#CHDGDICI" rel="nofollow">
     Importing and Exporting SQL Plan Baselines
    </a>
   </li>
  </ul>
 </ul>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/toc.htm" rel="nofollow">
   Oracle® Database PL/SQL Packages and Types Reference 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_spm.htm#insertedID0" rel="nofollow">
    Chapter 121, "DBMS_SPM"
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_spm.htm#CACEBBEI" rel="nofollow">
     <span style="font-family:monospace">
      EVOLVE_SQL_PLAN_BASELINE
     </span>
    </a>
   </li>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_spm.htm#CACBCAGD" rel="nofollow">
     <span style="font-family:monospace">
      LOAD_PLANS_FROM_SQLSET
     </span>
    </a>
   </li>
  </ul>
 </ul>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/toc.htm" rel="nofollow">
   Oracle® Database Reference 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams_part.htm#i200948" rel="nofollow">
    Part I Initialization Parameters
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams156.htm#I1010292" rel="nofollow">
     <span style="font-family:monospace">
      OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES
     </span>
    </a>
   </li>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams165.htm#I1010293" rel="nofollow">
     <span style="font-family:monospace">
      OPTIMIZER_USE_SQL_PLAN_BASELINES
     </span>
    </a>
   </li>
  </ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_part.htm#i125539" rel="nofollow">
    Part II Static Data Dictionary Views
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_4255.htm#I1023714" rel="nofollow">
     <span style="font-family:monospace">
      DBA_SQL_PLAN_BASELINES
     </span>
    </a>
   </li>
  </ul>
 </ul>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/toc.htm" rel="nofollow">
   Oracle® Database SQL Language Reference 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_2012.htm#i2231814" rel="nofollow">
    <span style="font-family:monospace">
     ALTER SESSION
    </span>
   </a>
  </li>
 </ul>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/toc.htm" rel="nofollow">
   Oracle® Database Upgrade Guide 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/preup.htm#insertedID0" rel="nofollow">
    Chapter 2, "Preparing to Upgrade"
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/preup.htm#insertedID1" rel="nofollow">
     Prepare to Upgrade
    </a>
   </li>
   <ul>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/preup.htm#i1008049" rel="nofollow">
      Develop a Testing Plan
     </a>
    </li>
    <ul>
     <li>
      <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/preup.htm#CEGCEDII" rel="nofollow">
       Performance Testing
      </a>
     </li>
     <ul>
      <li>
       <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/preup.htm#BABHAFAH" rel="nofollow">
        SQL Plan Management
       </a>
      </li>
      <ul>
       <li>
        <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/preup.htm#CEGFDEEI" rel="nofollow">
         Bulk Loading a SQL Management Base with a SQL Tuning Set (STS)
        </a>
       </li>
      </ul>
     </ul>
    </ul>
   </ul>
  </ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/changes.htm#insertedID0" rel="nofollow">
    Appendix A, "Behavior Changes"
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/changes.htm#insertedID1" rel="nofollow">
     Compatibility and Interoperability Issues in Oracle Database 11g Release 1 (11.1)
    </a>
   </li>
   <ul>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/changes.htm#BEHEJEGF" rel="nofollow">
      SQL Plan Management and Control of SQL Plan Baselines
     </a>
    </li>
   </ul>
  </ul>
 </ul>
 <h3>
  <a name="TOC-Overview">
  </a>
  Overview
 </h3>
 <p>
  The objective from the
  <a href="http://education.oracle.com/pls/web_prod-plq-dad/db_pages.getpage?page_id=41&amp;p_exam_id=11gOCMU#3" rel="nofollow">
   11G OCM Upgrade Exam
  </a>
  is:
 </p>
 <blockquote>
  Use SQL Plan Management feature
 </blockquote>
 <h3>
  <a name="TOC-Reading-Notes">
  </a>
  Reading Notes
 </h3>
 <h4>
  <a name="TOC-SQL-Plan-Management-and-Control-of-SQL-Plan-Baselines">
  </a>
  SQL Plan Management and Control of SQL Plan Baselines
 </h4>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/changes.htm#BEHEJEGF" rel="nofollow">
   SQL Plan Management and Control of SQL Plan Baselines
  </a>
  says:
 </p>
 <blockquote>
  <p>
   The use of stored outlines is deprecated in Oracle Database 11g Release 1 (11.1). Instead, you should use the
   <span style="font-weight:bold">
    SQL plan management feature that enables the optimizer to maintain a history of execution plans for a SQL statement.
   </span>
   Using the execution plan history, the optimizer is able to detect a new plan representing a plan change for a SQL statement. When the optimizer detects a new plan, it stores the new plan and marks it for performance evaluation and uses the old (currently known good) plan.
   <span style="font-weight:bold">
    The optimizer uses the new plan only after its performance is verified to be better than that of the old plan.
   </span>
   A SQL plan baseline consists of a set of known good plans for a SQL statement.
  </p>
  <p style="font-weight:bold;text-align:right">
   Emphasis Mine
  </p>
 </blockquote>
 <p>
  And the backward compatibility is as follows:
 </p>
 <blockquote>
  <p>
   If a stored outline is available for a SQL statement, then the SQL Plan Management feature is not used. However, if another user session uses the same SQL statement but without an active stored outline, then the SQL plan management feature is used.
  </p>
 </blockquote>
 <h4>
  <a name="TOC-SQL-Plan-Management">
  </a>
  SQL Plan Management
 </h4>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/preup.htm#BABHAFAH" rel="nofollow">
   SQL Plan Management
  </a>
  says that:
 </p>
 <blockquote>
  <p>
   There are two ways to seed or populate a SQL Management Base (SMB) with execution plans:
  </p>
  <ul>
   <li>
    Automatic capture of execution plans (available starting with Oracle Database 11g)
   </li>
   <li>
    Bulk load execution plans or preexisting SQL plan baselines
   </li>
  </ul>
  <p>
   Bulk loading of execution plans or SQL plan baselines is especially useful when upgrading a database from a previous version to Oracle Database 11g. SQL plans that are bulk loaded are automatically accepted and added to existing or new plan histories as SQL plan baselines. Use one of the following techniques to bulk load the SQL Management Base as part of an upgrade:
  </p>
  <ul>
   <li>
    Populate the execution plans for a given SQL Tuning Set (STS), as described in "
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/preup.htm#CEGFDEEI" rel="nofollow">
     Bulk Loading a SQL Management Base with a SQL Tuning Set (STS)
    </a>
    ".
   </li>
   <li>
    Unpack existing SQL plan baselines from a staging table, as described in "
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/preup.htm#CEGHCJEG" rel="nofollow">
     Unpacking Existing SQL Plan Baselines from a Staging Table
    </a>
    ".
   </li>
  </ul>
 </blockquote>
 <h4>
  <a name="TOC-Capturing-SQL-Plan-Baselines">
  </a>
  Capturing SQL Plan Baselines
 </h4>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABEIGAI" rel="nofollow">
   Capturing SQL Plan Baselines
  </a>
  says that:
 </p>
 <blockquote>
  <p>
   To recognize repeatable SQL statements, a statement log is maintained that contains identifiers of various SQL statements the optimizer has evaluated over time.
   <span style="font-weight:bold">
    A SQL statement is recognized as repeatable when it is parsed or executed again after it has been logged.
   </span>
  </p>
  <p style="font-weight:bold;text-align:right">
   Emphasis Mine
  </p>
 </blockquote>
 <h4>
  <a name="TOC-Automatic-Plan-Capture">
  </a>
  Automatic Plan Capture
 </h4>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABBJAAE" rel="nofollow">
   Automatic Plan Capture
  </a>
  says that:
 </p>
 <blockquote>
  <p>
   To enable automatic plan capture, set the
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams156.htm#I1010292" rel="nofollow">
    <span style="font-family:monospace">
     OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES
    </span>
   </a>
   initialization parameter to
   <span style="font-family:monospace">
    TRUE
   </span>
   . By default, this parameter is set to
   <span style="font-family:monospace">
    FALSE
   </span>
   .
  </p>
 </blockquote>
 <h4>
  <a name="TOC-Selecting-SQL-Plan-Baselines">
  </a>
  Selecting SQL Plan Baselines
 </h4>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABBECCH" rel="nofollow">
   Selecting SQL Plan Baselines
  </a>
  says that:
 </p>
 <blockquote>
  <p>
   To enable the use of SQL plan baselines, set the
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams165.htm#I1010293" rel="nofollow">
    <span style="font-family:monospace">
     OPTIMIZER_USE_SQL_PLAN_BASELINES
    </span>
   </a>
   initialization parameter to
   <span style="font-family:monospace">
    TRUE
   </span>
   (default).
  </p>
 </blockquote>
 <h4>
  <a name="TOC-Evolving-SQL-Plan-Baselines">
  </a>
  Evolving SQL Plan Baselines
 </h4>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABGIBEJ" rel="nofollow">
   Evolving SQL Plan Baselines
  </a>
  says that:
 </p>
 <blockquote>
  <p>
   During the SQL plan baseline evolution phase, the database evaluates the performance of new plans and integrates plans with better performance into SQL plan baselines.
  </p>
 </blockquote>
 <h5>
  <a name="TOC-Evolving-Plans-With-Manual-Plan-Loading">
  </a>
  Evolving Plans With Manual Plan Loading
 </h5>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABIAHJI" rel="nofollow">
   Evolving Plans With Manual Plan Loading
  </a>
  says that:
 </p>
 <blockquote>
  <p>
   You can evolve an existing SQL plan baseline by manually loading plans either from the cursor cache or from a SQL tuning set.
   <span style="font-weight:bold">
    When you manually load plans into a SQL plan baseline, these loaded plans are added as accepted plans
   </span>
   .
  </p>
  <p style="font-weight:bold;text-align:right">
   Emphasis Mine
  </p>
 </blockquote>
 <h5>
  <a name="TOC-Evolving-Plans-With-DBMS_SPM.EVOLVE_SQL_PLAN_BASELINE">
  </a>
  Evolving Plans With
  <span style="font-family:monospace">
   DBMS_SPM.EVOLVE_SQL_PLAN_BASELINE
  </span>
 </h5>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABEEHHC" rel="nofollow">
   Evolving Plans With
   <span style="font-family:monospace">
    DBMS_SPM.EVOLVE_SQL_PLAN_BASELINE
   </span>
  </a>
  says that:
 </p>
 <blockquote>
  <p>
   The PL/SQL function
   <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_spm.htm#CACEBBEI" rel="nofollow">
    <span style="font-family:monospace">
     DBMS_SPM.EVOLVE_SQL_PLAN_BASELINE
    </span>
   </a>
   tries to evolve new plans added by the optimizer to the plan history of existing plan baselines.
   <span style="font-weight:bold">
    If the function can verify that the new plan performs better than a plan chosen from the corresponding SQL plan baseline, the new plan is added as an accepted plan
   </span>
   .
  </p>
  <p style="font-weight:bold;text-align:right">
   Emphasis Mine
  </p>
 </blockquote>
 <h4>
  <a name="TOC-Using-SQL-Plan-Baselines-with-the-SQL-Tuning-Advisor">
  </a>
  Using SQL Plan Baselines with the SQL Tuning Advisor
 </h4>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABJIFII" rel="nofollow">
   Using SQL Plan Baselines with the SQL Tuning Advisor
  </a>
  says that:
 </p>
 <blockquote>
  <p>
   When tuning SQL statements with the SQL Tuning Advisor, if the advisor finds a tuned plan and verifies its performance to be better than a plan chosen from the corresponding SQL plan baseline, it makes a recommendation to accept a SQL profile.
   <span style="font-weight:bold">
    When the SQL profile is accepted, the tuned plan is added to the corresponding SQL plan baseline.
   </span>
   However, the SQL Tuning Advisor will not verify existing unaccepted plans in the plan history.
  </p>
  <p style="font-weight:bold;text-align:right">
   Emphasis Mine
  </p>
 </blockquote>
 <h4>
  <a name="TOC-Using-Fixed-SQL-Plan-Baselines">
  </a>
  Using Fixed SQL Plan Baselines
 </h4>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#BABICJBG" rel="nofollow">
   Using Fixed SQL Plan Baselines
  </a>
  says that:
 </p>
 <blockquote>
  <p>
   <span style="font-weight:bold">
    A SQL plan baseline is fixed if it contains at least one enabled plan whose FIXED attribute is set to YES.
   </span>
   You can use fixed SQL plan baselines to fix the set of possible plans (usually one plan) for a SQL statement, or migrate an existing stored outline by loading the "outlined" plan as a fixed plan.
  </p>
  <p>
   <span style="font-weight:bold">
    If a fixed SQL plan baseline also contains non-fixed plans, the optimizer will give preference to fixed plans over non-fixed ones.
   </span>
   This means that the optimizer will pick the fixed plan with the least cost even though a non-fixed plan may have an even lower cost. If none of the fixed plans is reproducible, then the optimizer will pick the best non-fixed plan.
  </p>
  <p>
   <span style="font-weight:bold">
    The optimizer will not add new plans to a fixed SQL plan baseline.
   </span>
   Since new plans are not automatically added, a fixed SQL plan baseline is not evolved when
   <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_spm.htm#CACEBBEI" rel="nofollow">
    <span style="font-family:monospace">
     DBMS_SPM.EVOLVE_SQL_PLAN_BASELINE
    </span>
   </a>
   is executed.
   <span style="font-weight:bold">
    However, a fixed SQL plan baseline can be evolved by manually loading new plans into it from the cursor cache or a SQL tuning set.
   </span>
  </p>
  <p>
   When a SQL statement with a fixed SQL plan baseline is tuned using the SQL Tuning Advisor, a SQL profile recommendation has special meaning. When the SQL profile is accepted, the tuned plan is added to the fixed SQL plan baseline as a non-fixed plan. However, as described above, the optimizer will not use the tuned plan as long as a reproducible fixed plan is present. Therefore, the benefit of SQL tuning may not be realized.
   <span style="font-weight:bold">
    To enable the use of the tuned plan, manually alter the tuned plan to a fixed plan by setting its FIXED attribute to YES.
   </span>
  </p>
  <p style="font-weight:bold;text-align:right">
   Emphasis Mine
  </p>
 </blockquote>
 <h3>
  <a name="TOC-Test-Case">
  </a>
  Test Case
 </h3>
 <p>
  The test I am using is the SQL from
  <a href="home/11g-ocm/11g-ocm-performance-management/11g-ocm-replay-a-captured-workload.html">
   Replay a captured workload
  </a>
  which has an SQL ID of 'dgdfqhj9ua2kv'.
 </p>
 <p>
  The test query is as follows:
 </p>
 <pre>SELECT
    products.prod_category,
    products.prod_subcategory,
    times.calendar_year,
    SUM( sales.quantity_sold )
      AS total_quantity_sold,
    SUM( sales.amount_sold )
      AS total_amount_sold
  FROM
      sales
    INNER JOIN
      products
    USING( prod_id )
    INNER JOIN
      customers
    USING( cust_id )
    INNER JOIN
      countries
    USING( country_id )
    INNER JOIN
      channels
    USING( channel_id )
    INNER JOIN
      times
    USING( time_id )
  WHERE
      products.prod_valid = 'A'
    AND
      channels.channel_class = 'Direct'
    AND
      customers.cust_valid = 'A'
    AND
      countries.country_name = 'Australia'
  GROUP BY
    products.prod_category,
    products.prod_subcategory,
    times.calendar_year
  ORDER BY
    products.prod_category,
    products.prod_subcategory,
    times.calendar_year
;
</pre>
 <p>
  This query is about a yearly summary of product categories and sub-categories sold directly to active customers in Australia.
 </p>
 <p>
  This query was put into an SQL Tuning Set called
  <span>
   SYS.OCM11G
  </span>
  during the procedure outlined in
  <a href="home/11g-ocm/11g-ocm-performance-management/11g-ocm-use-sql-tuning-advisor.html">
   Use SQL Tuning Advisor
  </a>
  .
 </p>
 <h3>
  <a name="TOC-Procedure">
  </a>
  Procedure
 </h3>
 <h4>
  <a name="TOC-Check-Status-of-SQL-Plan-Baselines">
  </a>
  Check Status of SQL Plan Baselines
 </h4>
 <p>
  The current value for the
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams156.htm#I1010292" rel="nofollow">
   <span style="font-family:monospace">
    OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES
   </span>
  </a>
  parameter is
  <span style="font-family:monospace">
   FALSE
  </span>
  :
 </p>
 <pre>SQL&gt; show parameter OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES

NAME                                 TYPE        VALUE
------------------------------------ ----------- --------
optimizer_capture_sql_plan_baselines boolean     FALSE
</pre>
 <h4>
  <a name="TOC-Enable-SQL-Plan-Baselines">
  </a>
  Enable SQL Plan Baselines
 </h4>
 <p>
  I am going to do this on a session level only:
 </p>
 <blockquote style="font-family:monospace">
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_2012.htm#i2231814" rel="nofollow">
   ALTER SESSION
  </a>
  SET
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams156.htm#I1010292" rel="nofollow">
   OPTIMIZER_CAPTURE_SQL_PLAN_BASELINES
  </a>
  =true;
 </blockquote>
 <h4>
  <a name="TOC-Load-Plans-From-SQL-Tuning-Set">
  </a>
  Load Plans From SQL Tuning Set
 </h4>
 <p>
  Following the procedure in
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28300/preup.htm#CEGFDEEI" rel="nofollow">
   Bulk Loading a SQL Management Base with a SQL Tuning Set (STS)
  </a>
  , I loaded the plan for the test SQL from the SQL Tuning Set,
  <span style="font-family:monospace">
   SYS.OCM11G
  </span>
  :
 </p>
 <blockquote style="font-family:monospace">
  VARIABLE num_plans_loaded NUMBER
  <br/>
  EXEC :num_plans_loaded :=
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_spm.htm#insertedID0" rel="nofollow">
   DBMS_SPM
  </a>
  .
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_spm.htm#CACBCAGD" rel="nofollow">
   LOAD_PLANS_FROM_SQLSET
  </a>
  ( 'OCM11G', 'SYS' );
  <br/>
  PRINT num_plans_loaded
  <br/>
 </blockquote>
 <p>
  The result is:
 </p>
 <table border="1">
  <tbody>
   <tr>
    <th>
     NUM_PLANS_LOADED
    </th>
   </tr>
   <tr>
    <td align="right">
     1
    </td>
   </tr>
  </tbody>
 </table>
 <h4>
  <a name="TOC-Displaying-SQL-Plan-Baselines">
  </a>
  Displaying SQL Plan Baselines
 </h4>
 <p>
  Using the procedure in
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/optplanmgmt.htm#CHDGGECE" rel="nofollow">
   Displaying SQL Plan Baselines
  </a>
  , the SQL Plan Baselines are found from:
 </p>
 <blockquote style="font-family:monospace">
  SELECT sql_handle, plan_name, enabled, accepted, fixed FROM
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_4255.htm#I1023714" rel="nofollow">
   DBA_SQL_PLAN_BASELINES
  </a>
  ;
 </blockquote>
 <p>
  The result is:
 </p>
 <table border="1">
  <tbody>
   <tr>
    <th>
     SQL_HANDLE
    </th>
    <th>
     PLAN_NAME
    </th>
    <th>
     ENABLED
    </th>
    <th>
     ACCEPTED
    </th>
    <th>
     FIXED
    </th>
   </tr>
   <tr>
    <td>
     SYS_SQL_143ab3c15ab507bc
    </td>
    <td>
     SYS_SQL_PLAN_5ab507bc2492fe52
    </td>
    <td>
     YES
    </td>
    <td>
     YES
    </td>
    <td>
     NO
    </td>
   </tr>
  </tbody>
 </table>
</div>
