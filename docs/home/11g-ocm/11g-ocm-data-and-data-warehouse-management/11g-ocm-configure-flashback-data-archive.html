---
layout: default
title: '11G OCM Configure Flashback Data Archive'
base-url: home/11g-ocm/11g-ocm-data-and-data-warehouse-management/11g-ocm-configure-flashback-data-archive.html
breadcrumbs:
- title: 'Home'
  url: home.html
- title: '11G OCM'
  url: home/11g-ocm.html
- title: '11G OCM Data and Data Warehouse Management'
  url: home/11g-ocm/11g-ocm-data-and-data-warehouse-management.html
- title: '11G OCM Configure Flashback Data Archive'
  url: home/11g-ocm/11g-ocm-data-and-data-warehouse-management/11g-ocm-configure-flashback-data-archive.html
table-of-contents:
- toc-url: References
  toc-text: References
- toc-url: Overview
  toc-text: Overview
- toc-url: Reading-Notes
  toc-text: Reading Notes
  toc-menu:
  - toc-url: Definition
    toc-text: Definition
- toc-url: Procedure
  toc-text: Procedure
  toc-menu:
  - toc-url: Create-Tablespace
    toc-text: Create Tablespace
  - toc-url: Creating-a-Flashback-Data-Archive
    toc-text: Creating a Flashback Data Archive
  - toc-url: Altering-a-Flashback-Data-Archive
    toc-text: Altering a Flashback Data Archive
  - toc-url: Dropping-a-Flashback-Data-Archive
    toc-text: Dropping a Flashback Data Archive
  - toc-url: Specifying-the-Default-Flashback-Data-Archive
    toc-text: Specifying the Default Flashback Data Archive
  - toc-url: Enabling-and-Disabling-Flashback-Data-Archive
    toc-text: Enabling and Disabling Flashback Data Archive
  - toc-url: DDL-Statements-Not-Allowed-on-Tables-Enabled-for-Flashback-Data-Archive
    toc-text: DDL Statements Not Allowed on Tables Enabled for Flashback Data Archive
  - toc-url: Viewing-Flashback-Data-Archive-Data
    toc-text: Viewing Flashback Data Archive Data
---
<div dir="ltr">
 <br/>
 <h3>
  <a name="TOC-References">
  </a>
  References
 </h3>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/toc.htm" rel="nofollow">
   Oracle® Database Advanced Application Developer's Guide 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#insertedID0" rel="nofollow">
    Chapter 13, "Using Oracle Flashback Technology"
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFFDCEH" rel="nofollow">
     Using Flashback Data Archive (Oracle Total Recall)
    </a>
   </li>
   <ul>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFBJCCF" rel="nofollow">
      Creating a Flashback Data Archive
     </a>
    </li>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFIEEII" rel="nofollow">
      Altering a Flashback Data Archive
     </a>
    </li>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFBCABH" rel="nofollow">
      Dropping a Flashback Data Archive
     </a>
    </li>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFCDJAD" rel="nofollow">
      Specifying the Default Flashback Data Archive
     </a>
    </li>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFEIJEE" rel="nofollow">
      Enabling and Disabling Flashback Data Archive
     </a>
    </li>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFJHDAG" rel="nofollow">
      DDL Statements Not Allowed on Tables Enabled for Flashback Data Archive
     </a>
    </li>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFCAFDG" rel="nofollow">
      Viewing Flashback Data Archive Data
     </a>
    </li>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFJCEGD" rel="nofollow">
      Flashback Data Archive Scenarios
     </a>
    </li>
   </ul>
  </ul>
 </ul>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/backup.111/b28270/toc.htm" rel="nofollow">
   Oracle® Database Backup and Recovery User's Guide 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/backup.111/b28270/rcmintro.htm#insertedID0" rel="nofollow">
    Chapter 1, "Introduction to Backup and Recovery"
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/backup.111/b28270/rcmintro.htm#insertedID3" rel="nofollow">
     Oracle Flashback Technology
    </a>
   </li>
  </ul>
 </ul>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28318/toc.htm" rel="nofollow">
   Oracle® Database Concepts 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28318/high_av.htm#insertedID0" rel="nofollow">
    Chapter 17, "High Availability"
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28318/high_av.htm#insertedID4" rel="nofollow">
     Protection Against Data Failures
    </a>
   </li>
   <ul>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28318/high_av.htm#CACFAGDI" rel="nofollow">
      Protecting Against Human Errors
     </a>
    </li>
    <ul>
     <li>
      <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28318/high_av.htm#CACICFBF" rel="nofollow">
       Oracle Flashback Technology
      </a>
     </li>
    </ul>
   </ul>
  </ul>
 </ul>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28281/toc.htm" rel="nofollow">
   Oracle® Database High Availability Overview 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28281/hafeatures.htm#insertedID0" rel="nofollow">
    Chapter 2, "Oracle Database High Availability Features and Products"
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28281/hafeatures.htm#CJACEEIA" rel="nofollow">
     Oracle High Availability Features and Solutions for Unplanned Downtime
    </a>
   </li>
   <ul>
    <li>
     <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28281/hafeatures.htm#i1007193" rel="nofollow">
      Oracle Flashback Technology
     </a>
    </li>
   </ul>
  </ul>
 </ul>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/toc.htm" rel="nofollow">
   Oracle® Database Reference 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_part.htm#i125539" rel="nofollow">
    Part II Static Data Dictionary Views
   </a>
  </li>
  <ul>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_3174.htm#insertedID0" rel="nofollow">
     <span style="font-family:monospace">
      DBA_FLASHBACK_ARCHIVE
     </span>
    </a>
   </li>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_3175.htm#I1023715" rel="nofollow">
     <span style="font-family:monospace">
      DBA_FLASHBACK_ARCHIVE_TABLES
     </span>
    </a>
   </li>
   <li>
    <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_3176.htm#insertedID0" rel="nofollow">
     <span style="font-family:monospace">
      DBA_FLASHBACK_ARCHIVE_TS
     </span>
    </a>
   </li>
  </ul>
 </ul>
 <p>
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/toc.htm" rel="nofollow">
   Oracle® Database SQL Language Reference 11g Release 1 (11.1)
  </a>
 </p>
 <ul>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_1007.htm#insertedID0" rel="nofollow">
    <span style="font-family:monospace">
     ALTER FLASHBACK ARCHIVE
    </span>
   </a>
  </li>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_3001.htm#insertedID0" rel="nofollow">
    <span style="font-family:monospace">
     ALTER TABLE
    </span>
   </a>
  </li>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_5009.htm#insertedID0" rel="nofollow">
    <span style="font-family:monospace">
     CREATE FLASHBACK ARCHIVE
    </span>
   </a>
  </li>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_7003.htm#i2231734" rel="nofollow">
    <span style="font-family:monospace">
     CREATE TABLESPACE
    </span>
   </a>
  </li>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_8014.htm#BABJAGIE" rel="nofollow">
    <span style="font-family:monospace">
     DROP FLASHBACK ARCHIVE
    </span>
   </a>
  </li>
  <li>
   <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10007.htm#i2067571" rel="nofollow">
    <span style="font-family:monospace">
     TRUNCATE TABLE
    </span>
   </a>
  </li>
 </ul>
 <h3>
  <a name="TOC-Overview">
  </a>
  Overview
 </h3>
 <p>
  The objective from the
  <a href="http://education.oracle.com/pls/web_prod-plq-dad/db_pages.getpage?page_id=41&amp;p_exam_id=11gOCMU#3" rel="nofollow">
   11G OCM Upgrade Exam
  </a>
  is:
 </p>
 <blockquote>
  Configure Flashback Data Archive
 </blockquote>
 <h3>
  <a name="TOC-Reading-Notes">
  </a>
  Reading Notes
 </h3>
 <h4>
  <a name="TOC-Definition">
  </a>
  Definition
 </h4>
 <p>
  "
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28318/high_av.htm#CACICFBF" rel="nofollow">
   Oracle Flashback Technology
  </a>
  " says that:
 </p>
 <blockquote>
  <p>
   A Flashback Data Archive provides the ability to track and store all transactional changes to a table over its lifetime. It is no longer necessary to build this intelligence into your application. A Flashback Data Archive is useful for compliance with record stage policies and audit reports.
  </p>
 </blockquote>
 <p>
  "
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28281/hafeatures.htm#i1007193" rel="nofollow">
   Oracle Flashback Technology
  </a>
  " says that Flashback Data Archive is:
 </p>
 <blockquote>
  <p>
   An archive that is stored in a tablespace and contains transactional changes to every record in a table for the duration of the record's lifetime. The archived data can be retained for a much longer duration than the retention period offered by an undo tablespace.
  </p>
 </blockquote>
 <p>
  "
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28281/hafeatures.htm#i1007193" rel="nofollow">
   Oracle Flashback Technology
  </a>
  " says that:
 </p>
 <blockquote>
  <p>
   A
   <a href="http://docs.oracle.com/cd/B28359_01/backup.111/b28270/glossary.htm#CHDCEBEG" rel="nofollow">
    flashback data archive
   </a>
   enables you to use some of the logical flashback features to access data from far back in the past. A flashback data archive consists of one or more tablespaces or parts of tablespaces. When you create a flashback data archive, you specify the name, retention period, and tablespace. You can also specify a default flashback data archive. The database automatically purges old historical data the day after the retention period expires.
  </p>
 </blockquote>
 <h3>
  <a name="TOC-Procedure">
  </a>
  Procedure
 </h3>
 <h4>
  <a name="TOC-Create-Tablespace">
  </a>
  Create Tablespace
 </h4>
 <p>
  Although this step is not necessary, I am going to use a separate tablespace for the Flashback Data Archive:
 </p>
 <blockquote style="font-family:monospace">
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_7003.htm#i2231734" rel="nofollow">
   CREATE TABLESPACE
  </a>
  flashback;
 </blockquote>
 <h4>
  <a name="TOC-Creating-a-Flashback-Data-Archive">
  </a>
  Creating a Flashback Data Archive
 </h4>
 <p>
  Following the procedure in
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFBJCCF" rel="nofollow">
   Creating a Flashback Data Archive
  </a>
  , I created a Flashback Data Archive for use with the
  <span style="font-family:monospace">
   OCMPART
  </span>
  schema:
 </p>
 <blockquote style="font-family:monospace">
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_5009.htm#insertedID0" rel="nofollow">
   CREATE FLASHBACK ARCHIVE
  </a>
  ocmpart_flash TABLESPACE flashback RETENTION 1 YEAR;
 </blockquote>
 <h4>
  <a name="TOC-Altering-a-Flashback-Data-Archive">
  </a>
  Altering a Flashback Data Archive
 </h4>
 <p>
  Following the procedure in
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFIEEII" rel="nofollow">
   Altering a Flashback Data Archive
  </a>
  , I now make the Flashback Data Archive called
  <span style="font-family:monospace">
   OCMPART_FLASH
  </span>
  the default:
 </p>
 <blockquote style="font-family:monospace">
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_1007.htm#insertedID0" rel="nofollow">
   ALTER FLASHBACK ARCHIVE
  </a>
  ocmpart_flash SET DEFAULT;
 </blockquote>
 <h4>
  <a name="TOC-Dropping-a-Flashback-Data-Archive">
  </a>
  Dropping a Flashback Data Archive
 </h4>
 <p>
  Following the procedure in
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFBCABH" rel="nofollow">
   Dropping a Flashback Data Archive
  </a>
  , I now drop the Flashback Data Archive called
  <span style="font-family:monospace">
   OCMPART_FLASH
  </span>
  :
 </p>
 <blockquote style="font-family:monospace">
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_8014.htm#BABJAGIE" rel="nofollow">
   DROP FLASHBACK ARCHIVE
  </a>
  ocmpart_flash;
 </blockquote>
 <h4>
  <a name="TOC-Specifying-the-Default-Flashback-Data-Archive">
  </a>
  Specifying the Default Flashback Data Archive
 </h4>
 <p>
  Following the procedure in
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFCDJAD" rel="nofollow">
   Specifying the Default Flashback Data Archive
  </a>
  , I now create the Flashback Data Archive called
  <span style="font-family:monospace">
   OCMPART_FLASH
  </span>
  as the default:
 </p>
 <blockquote style="font-family:monospace">
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_5009.htm#insertedID0" rel="nofollow">
   CREATE FLASHBACK ARCHIVE
  </a>
  DEFAULT ocmpart_flash TABLESPACE flashback RETENTION 1 YEAR;
 </blockquote>
 <h4>
  <a name="TOC-Enabling-and-Disabling-Flashback-Data-Archive">
  </a>
  Enabling and Disabling Flashback Data Archive
 </h4>
 <p>
  Following the procedure in
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFEIJEE" rel="nofollow">
   Enabling and Disabling Flashback Data Archive
  </a>
  , I will now enable Flashback Data Archiving on
  <span style="font-family:monospace">
   OCMPART.SALES
  </span>
  :
 </p>
 <blockquote style="font-family:monospace">
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_3001.htm#insertedID0" rel="nofollow">
   ALTER TABLE
  </a>
  ocmpart.sales FLASHBACK ARCHIVE;
 </blockquote>
 <p>
  No name is specified for the Flashback Data Archive as the default one is sufficient.
 </p>
 <h4>
  <a name="TOC-DDL-Statements-Not-Allowed-on-Tables-Enabled-for-Flashback-Data-Archive">
  </a>
  DDL Statements Not Allowed on Tables Enabled for Flashback Data Archive
 </h4>
 <p>
  Following the procedure in
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFJHDAG" rel="nofollow">
   DDL Statements Not Allowed on Tables Enabled for Flashback Data Archive
  </a>
  , I attempt to truncate the table:
 </p>
 <blockquote style="font-family:monospace">
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10007.htm#i2067571" rel="nofollow">
   TRUNCATE TABLE
  </a>
  ocmpart.sales;
 </blockquote>
 <p>
  And I get the following error message:
 </p>
 <blockquote style="font-family:monospace">
  ORA-55610: Invalid DDL statement on history-tracked table
 </blockquote>
 <p>
  An explanation of the error message is:
 </p>
 <pre>55610, 00000, "Invalid DDL statement on history-tracked table"
// *Cause: An attempt was made to perform certain DDL statement that is
//         disallowed on tables that are enabled for Flashback Archive.
// *Action: No action required.
</pre>
 <h4>
  <a name="TOC-Viewing-Flashback-Data-Archive-Data">
  </a>
  Viewing Flashback Data Archive Data
 </h4>
 <p>
  Following the procedure in
  <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm#BJFCAFDG" rel="nofollow">
   Viewing Flashback Data Archive Data
  </a>
  , I did queries on the static views:
 </p>
 <blockquote style="font-family:monospace">
  SELECT * FROM
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_3175.htm#I1023715" rel="nofollow">
   dba_flashback_archive_tables
  </a>
  ;
 </blockquote>
 <p>
  The result is:
 </p>
 <table border="1">
  <thead>
   <tr>
    <th>
     TABLE_NAME
    </th>
    <th>
     OWNER_NAME
    </th>
    <th>
     FLASHBACK_ARCHIVE_NAME
    </th>
    <th>
     ARCHIVE_TABLE_NAME
    </th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td>
     SALES
    </td>
    <td>
     OCMPART
    </td>
    <td>
     OCMPART_FLASH
    </td>
    <td>
     SYS_FBA_HIST_71727
    </td>
   </tr>
  </tbody>
 </table>
 <blockquote style="font-family:monospace">
  SELECT * FROM
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_3174.htm#insertedID0" rel="nofollow">
   DBA_FLASHBACK_ARCHIVE
  </a>
  ;
 </blockquote>
 <p>
  The result is:
 </p>
 <table border="1">
  <thead>
   <tr>
    <th>
     FLASHBACK_ARCHIVE_NAME
    </th>
    <th>
     FLASHBACK_ARCHIVE#
    </th>
    <th>
     RETENTION_IN_DAYS
    </th>
    <th>
     CREATE_TIME
    </th>
    <th>
     LAST_PURGE_TIME
    </th>
    <th>
     STATUS
    </th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td>
     OCMPART_FLASH
    </td>
    <td align="right">
     1
    </td>
    <td align="right">
     365
    </td>
    <td>
     28/FEB/12 11:37:55.000000000 PM
    </td>
    <td>
     28/FEB/12 11:37:55.000000000 PM
    </td>
    <td>
     DEFAULT
    </td>
   </tr>
  </tbody>
 </table>
 <blockquote style="font-family:monospace">
  SELECT * FROM
  <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_3176.htm#insertedID0" rel="nofollow">
   DBA_FLASHBACK_ARCHIVE_TS
  </a>
  ;
 </blockquote>
 <p>
  The result is:
 </p>
 <table border="1">
  <thead>
   <tr>
    <th>
     FLASHBACK_ARCHIVE_NAME
    </th>
    <th>
     FLASHBACK_ARCHIVE#
    </th>
    <th>
     TABLESPACE_NAME
    </th>
    <th>
     QUOTA_IN_MB
    </th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td>
     OCMPART_FLASH
    </td>
    <td align="right">
     1
    </td>
    <td>
     FLASHBACK
    </td>
    <td>
    </td>
   </tr>
  </tbody>
 </table>
</div>
