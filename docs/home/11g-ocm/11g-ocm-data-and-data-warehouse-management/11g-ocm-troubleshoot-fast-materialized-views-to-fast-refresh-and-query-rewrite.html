<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { /*

Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/
(function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.getStartTickTime=function(){return this.t.start[0]};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=
b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})(); })()
</script>
<link rel="shortcut icon" href="../../../_/rsrc/1294140403248/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/3168fb/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { function d(a){return document.getElementById(a)}window.byId=d;function g(a){return a.replace(/^\s+|\s+$/g,"")}window.trim=g;var h=[],k=0;window.JOT_addListener=function(a,b,c){var f=new String(k++);a={eventName:a,handler:b,compId:c,key:f};h.push(a);return f};window.JOT_removeListenerByKey=function(a){for(var b=0;b<h.length;b++)if(h[b].key==a){h.splice(b,1);break}};window.JOT_removeAllListenersForName=function(a){for(var b=0;b<h.length;b++)h[b].eventName==a&&h.splice(b,1)};
window.JOT_postEvent=function(a,b,c){var f={eventName:a,eventSrc:b||{},payload:c||{}};if(window.JOT_fullyLoaded)for(b=h.length,c=0;c<b&&c<h.length;c++){var e=h[c];e&&e.eventName==a&&(f.listenerCompId=e.compId||"",(e="function"==typeof e.handler?e.handler:window[e.handler])&&e(f))}else window.JOT_delayedEvents.push({eventName:a,eventSrc:b,payload:c})};window.JOT_delayedEvents=[];window.JOT_fullyLoaded=!1;
window.JOT_formatRelativeToNow=function(a,b){a=((new Date).getTime()-a)/6E4;if(1440<=a||0>a)return null;var c=0;60<=a&&(a/=60,c=2);2<=a&&c++;return b?window.JOT_siteRelTimeStrs[c].replace("__duration__",Math.floor(a)):window.JOT_userRelTimeStrs[c].replace("__duration__",Math.floor(a))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/home","deleted":false,"title":"Home","dir":"ltr"},{"path":"/home/11g-ocm","deleted":false,"title":"11G OCM","dir":"ltr"},{"path":"/home/11g-ocm/11g-ocm-data-and-data-warehouse-management","deleted":false,"title":"11G OCM Data and Data Warehouse Management","dir":"ltr"},{"path":"/home/11g-ocm/11g-ocm-data-and-data-warehouse-management/11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite","deleted":false,"title":"11G OCM Troubleshoot fast materialized views to fast refresh and query rewrite","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/3168fb/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"gvizGstaticVersion":"current","enableAnalytics":true,"pageSharingId":"jotspot_page","codeembeds":{"outerIframeSrc":"https://www.gstatic.com/jotspot/embeds/code/0f08d42392f2000e7e3f3daf5b427a43/outer_iframe.html","innerIframeSrc":"https://1891984457-jotspot-embeds.googleusercontent.com/code/8d87fa64604b2a11fae2ed06104c58d3/inner_iframe.html"},"enableUniversalAnalytics":false,"sharingPolicy":"OPENED","siteTitle":"Yet Another OCM","experiments":{"enableSubpagesGadgetInTakeout":true,"DisableSiteEditingFeature__disable_site_editing":false},"jot2atari":{"eligibility":"ineligible"},"onepickUrl":"https://docs.google.com/picker","adsensePublisherId":null,"features":{"moreMobileStyleImprovements":null,"subscriptionDataMigrationInProgress":null,"plusBadge":false},"configProperties":{"disableSiteEditing":null},"isPublic":true,"newSitesBaseUrl":"https://sites.google.com","isConsumer":true,"serverFlags":{"jot2AtariLearnMoreUrl":"https://support.google.com/sites/answer/7035197"},"domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://accounts.google.com/AccountChooser?continue\u003dhttps://dfhawthorne.github.io/home/11g-ocm/11g-ocm-data-and-data-warehouse-management/11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite\u0026service\u003djotspot","analyticsAccountId":"UA-20772336-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/3168fb/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/3168fb/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/3168fb/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/3168fb/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/3168fb/system/app/css/trogedit.css","/_/rsrc/1619893815000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/3168fb/system/app/css/codeeditor.css","/_/rsrc/1619893815000/system/app/css/camelot/editor-jfk.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"defaultdomain","baseUri":"/","name":"yetanotherocmoriginal","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/home/11g-ocm/11g-ocm-data-and-data-warehouse-management","parentWuid":"wuid:gx:71d7afe17670b648","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"11G OCM Troubleshoot fast materialized views to fast refresh and query rewrite","locale":"en","wuid":"wuid:gx:4ba0f97d7fd0a2e","revision":1,"path":"/home/11g-ocm/11g-ocm-data-and-data-warehouse-management/11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="11G OCM Troubleshoot fast materialized views to fast refresh and query rewrite - Yet Another OCM" />
<meta itemprop="name" content="11G OCM Troubleshoot fast materialized views to fast refresh and query rewrite - Yet Another OCM" />
<meta property="og:title" content="11G OCM Troubleshoot fast materialized views to fast refresh and query rewrite - Yet Another OCM" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/3168fb/system/app/themes/simplywhite/standard-css-simplywhite-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1619893815000/system/app/css/overlay.css%3Fcb=simplywhiteundefineda100%2570200goog-ws-left.css" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1619893815000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>11G OCM Troubleshoot fast materialized views to fast refresh and query rewrite - Yet Another OCM</title>
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner" style="height: 70px"><div class="sites-header-cell-buffer-wrapper"><h2><a href="../../../index.html" dir="ltr" id="sites-chrome-userheader-title">Yet Another OCM</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://dfhawthorne.github.io/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:200px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_2bd" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList" class="has-expander"><li class="topLevel nav-first parent " wuid="gx:3b2a480be041e60"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="../../../home.html" jotId="wuid:gx:3b2a480be041e60" class="sites-navigation-link topLevel">Home</a></div><ul role="navigation" class="has-expander"><li class="parent closed " wuid="gx:6854663d0adfa523"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../10g-ocm.html" jotId="wuid:gx:6854663d0adfa523" class="sites-navigation-link">10G OCM</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../10g-ocm/10g-data-guard.html" jotId="wuid:gx:489beb2b832a7114" class="sites-navigation-link">10G Data Guard</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../10g-ocm/10g-ocm-planning.html" jotId="wuid:gx:a88c5dbc7f0baef" class="sites-navigation-link">10G OCM Planning</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../10g-ocm/10g-services.html" jotId="wuid:gx:54b13c32cf65c191" class="sites-navigation-link">10G Services</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../10g-ocm/10g-system-builds.html" jotId="wuid:gx:77c66066c03e2ab7" class="sites-navigation-link">10G System Builds</a></div></li></ul></li><li class="parent closed " wuid="gx:7f73cdd56622237c"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../11g-oce-rac.html" jotId="wuid:gx:7f73cdd56622237c" class="sites-navigation-link">11G OCE RAC</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../11g-oce-rac/section-1---grid-infrastructure-clusterware-and-asm.html" jotId="wuid:gx:7780a2761cf95de4" class="sites-navigation-link">Section 1 - Grid Infrastructure: Clusterware and ASM</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../11g-oce-rac/section-2---real-application-clusters.html" jotId="wuid:gx:267824251d3363d4" class="sites-navigation-link">Section 2 - Real Application Clusters</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../11g-oce-rac/system-builds.html" jotId="wuid:gx:30640194b5755edd" class="sites-navigation-link">System Builds</a></div></li></ul></li><li class="parent closed " wuid="gx:5eeac2a35b15a760"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../11g-ocm.html" jotId="wuid:gx:5eeac2a35b15a760" class="sites-navigation-link">11G OCM</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../11g-ocm-data-and-data-warehouse-management.html" jotId="wuid:gx:71d7afe17670b648" class="sites-navigation-link">11G OCM Data and Data Warehouse Management</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../11g-ocm-data-guard.html" jotId="wuid:gx:70e445f4702ec675" class="sites-navigation-link">11G OCM Data Guard</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../11g-ocm-database-rman-em-and-network-configuration.html" jotId="wuid:gx:795d9befe3118e8d" class="sites-navigation-link">11G OCM Database, RMAN, EM and Network Configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../11g-ocm-performance-management.html" jotId="wuid:gx:5156bf6750dc17a2" class="sites-navigation-link">11G OCM Performance Management</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../11g-ocm-system-builds.html" jotId="wuid:gx:4389b1e578a37048" class="sites-navigation-link">11G OCM System Builds</a></div></li></ul></li><li class="parent closed " wuid="gx:45debd466b37352f"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../12-ocm.html" jotId="wuid:gx:45debd466b37352f" class="sites-navigation-link">12C OCM</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../12-ocm/12c-ocm-system-builds.html" jotId="wuid:gx:702a95293f377a1f" class="sites-navigation-link">12C OCM System Builds</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../12-ocm/data-and-performance-management.html" jotId="wuid:gx:1384b0e8b9408e1b" class="sites-navigation-link">Data and Performance Management</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../12-ocm/data-guard.html" jotId="wuid:gx:7ee58a5d08758938" class="sites-navigation-link">Data Guard</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../12-ocm/design-journal.html" jotId="wuid:gx:4c1a2046866ab43a" class="sites-navigation-link">Design Journal</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../12-ocm/general-database-and-network-administration-and-backup-strategy.html" jotId="wuid:gx:454ec3cb615b531f" class="sites-navigation-link">General Database and Network Administration, and Backup Strategy</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../12-ocm/grid-infrastructure-and-rac.html" jotId="wuid:gx:69a92aa26af488f2" class="sites-navigation-link">Grid Infrastructure and RAC</a></div></li></ul></li><li class="parent closed " wuid="gx:3a92b59c02fad974"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../12c-ocp-upgrade.html" jotId="wuid:gx:3a92b59c02fad974" class="sites-navigation-link">12C OCP Upgrade</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../12c-ocp-upgrade/section-1-new-features-of-oracle-database-12c.html" jotId="wuid:gx:333d3378e4d8110a" class="sites-navigation-link">Section 1: New Features of Oracle Database 12c</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../12c-ocp-upgrade/section-2-key-dba-skills.html" jotId="wuid:gx:1c496affd5a26d55" class="sites-navigation-link">Section 2: Key DBA Skills</a></div></li></ul></li><li class="parent closed " wuid="gx:ecd2e3476a85dd0"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../database-designs.html" jotId="wuid:gx:ecd2e3476a85dd0" class="sites-navigation-link">Database Designs</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../database-designs/much-ado-about-nothing.html" jotId="wuid:gx:403b416305137e1c" class="sites-navigation-link">Much Ado About Nothing</a></div></li></ul></li><li class="parent closed " wuid="gx:7106fb0a895904cd"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../issues.html" jotId="wuid:gx:7106fb0a895904cd" class="sites-navigation-link">Issues</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../issues/cloud-control-issues.html" jotId="wuid:gx:7c017fe7b1b7db02" class="sites-navigation-link">Cloud Control Issues</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../issues/linux-issues.html" jotId="wuid:gx:6bf0bf8b64edb3f9" class="sites-navigation-link">Linux Issues</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../issues/oracle-patching-issues.html" jotId="wuid:gx:74b8bf5ac4858eb0" class="sites-navigation-link">Oracle Patching Issues</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../issues/oracle-personal-edition-issues.html" jotId="wuid:gx:520e0a14b597913a" class="sites-navigation-link">Oracle Personal Edition Issues</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../issues/ovm-issues.html" jotId="wuid:gx:77bb41fbebb34425" class="sites-navigation-link">OVM Issues</a></div></li></ul></li><li class="parent closed " wuid="gx:29a6fee7cdc745ef"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../knowledge.html" jotId="wuid:gx:29a6fee7cdc745ef" class="sites-navigation-link">Knowledge</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../knowledge/demonstrations.html" jotId="wuid:gx:5566308badf9236b" class="sites-navigation-link">Demonstrations</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../knowledge/help-pages.html" jotId="wuid:gx:524a1fa20211bba4" class="sites-navigation-link">Help Pages</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../knowledge/oracle-utilities.html" jotId="wuid:gx:7e79f0ae6f222cfe" class="sites-navigation-link">Oracle Utilities</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../knowledge/technical-notes.html" jotId="wuid:gx:eb5c1299b9c5629" class="sites-navigation-link">Technical Notes</a></div></li></ul></li><li class="parent closed " wuid="gx:c14ef310b5d580c"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../procedures.html" jotId="wuid:gx:c14ef310b5d580c" class="sites-navigation-link">Procedures</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../procedures/create-oracle-database.html" jotId="wuid:gx:66844774cb1472af" class="sites-navigation-link">Create Oracle Database</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../procedures/deinstall-oracle-rdbms.html" jotId="wuid:gx:f122a7a035acc27" class="sites-navigation-link">Deinstall Oracle RDBMS</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../procedures/install-grid-infrastructure.html" jotId="wuid:gx:2ceeddc46048b732" class="sites-navigation-link">Install Grid Infrastructure</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../procedures/install-linux.html" jotId="wuid:gx:1492df0262c2ded3" class="sites-navigation-link">Install Linux</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../procedures/install-oracle-rdbms.html" jotId="wuid:gx:eb868e71022bb04" class="sites-navigation-link">Install Oracle RDBMS</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../procedures/miscellaneous.html" jotId="wuid:gx:2bcb31c503521cac" class="sites-navigation-link">Miscellaneous</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../procedures/patch-oracle-database.html" jotId="wuid:gx:2869e232f218ebdb" class="sites-navigation-link">Patch Oracle Database</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../procedures/upgrade-oracle-database.html" jotId="wuid:gx:504db3f787da1411" class="sites-navigation-link">Upgrade Oracle Database</a></div></li></ul></li><li class="parent closed " wuid="gx:7349065b46fcf29e"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../projects.html" jotId="wuid:gx:7349065b46fcf29e" class="sites-navigation-link">Projects</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../projects/setting-up-a-private-cloud.html" jotId="wuid:gx:4a06d2a31bace57d" class="sites-navigation-link">Setting Up a Private Cloud</a></div></li></ul></li><li class="parent closed " wuid="gx:1751da469fd4a61f"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../reading-notes.html" jotId="wuid:gx:1751da469fd4a61f" class="sites-navigation-link">Reading Notes</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../reading-notes/oracle-vm-implementation-and-administration-guide.html" jotId="wuid:gx:14243848ab9914bb" class="sites-navigation-link">Oracle VM Implementation and Administration Guide</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../reading-notes/pro-oracle-database-12c-administration.html" jotId="wuid:gx:4358cd288f337e82" class="sites-navigation-link">Pro Oracle Database 12c Administration</a></div></li></ul></li><li class="parent closed " wuid="gx:419b9a9eeae58bc4"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../resource-allocations.html" jotId="wuid:gx:419b9a9eeae58bc4" class="sites-navigation-link">Resource Allocations</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../resource-allocations/ip-addresses.html" jotId="wuid:gx:561dea96a669771d" class="sites-navigation-link">IP Addresses</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../resource-allocations/victoria-vm-resources.html" jotId="wuid:gx:68cdf1d51fd331c2" class="sites-navigation-link">Victoria VM Resources</a></div></li></ul></li><li class="parent closed " wuid="gx:763c8c972462e886"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="../../system-builds.html" jotId="wuid:gx:763c8c972462e886" class="sites-navigation-link">System Builds</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/auburn.html" jotId="wuid:gx:7333fb4a9cb176e1" class="sites-navigation-link">AUBURN</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/clifton.html" jotId="wuid:gx:65e47d76f4cf9a5d" class="sites-navigation-link">CLIFTON</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/cloudctl.html" jotId="wuid:gx:5fa340d44587d03" class="sites-navigation-link">CLOUDCTL</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/cronulla.html" jotId="wuid:gx:3e6aa0e71514d4b7" class="sites-navigation-link">CRONULLA</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/goldengate.html" jotId="wuid:gx:218d9e7c410189e8" class="sites-navigation-link">GOLDENGATE</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/gordon.html" jotId="wuid:gx:337b55952ad14bf" class="sites-navigation-link">GORDON</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/gridctrl.html" jotId="wuid:gx:22e160f4756f6339" class="sites-navigation-link">GRIDCTRL</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/melbourne.html" jotId="wuid:gx:8ccc77de5c0c0ed" class="sites-navigation-link">MELBOURNE</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/oatley.html" jotId="wuid:gx:7c8d46141284a0d5" class="sites-navigation-link">OATLEY</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/personal.html" jotId="wuid:gx:6bc86e743a02acf1" class="sites-navigation-link">PERSONAL</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/randwick.html" jotId="wuid:gx:7f108dc57ee2f76" class="sites-navigation-link">RANDWICK</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/redfern.html" jotId="wuid:gx:21a1ed3bcc21c853" class="sites-navigation-link">REDFERN</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/revesby.html" jotId="wuid:gx:1a25b24cca382d08" class="sites-navigation-link">Revesby</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="../../system-builds/victoria.html" jotId="wuid:gx:a8bab9e3f3d3ebf" class="sites-navigation-link">Victoria</a></div></li></ul></li></ul></li><li class="topLevel parent " wuid="gx:43c2eaccaaff7317"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="../../../announcements.html" jotId="wuid:gx:43c2eaccaaff7317" class="sites-navigation-link topLevel">Announcements</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="../../../announcements/12april2012.html" jotId="wuid:gx:23728264e5601b93" class="sites-navigation-link">12 April 2012</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="../../../announcements/12march2012.html" jotId="wuid:gx:7b88c20efad9a3da" class="sites-navigation-link">12 March 2012</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="../../../announcements/27march2012.html" jotId="wuid:gx:632b604734e2dac9" class="sites-navigation-link">27 March 2012</a></div></li></ul></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="../../../book-reviews.html" jotId="wuid:gx:5d0d248f2da8dddc" class="sites-navigation-link topLevel">Book Reviews</a></div></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="../../../file-cabinet.html" jotId="wuid:gx:2434f251e91aec68" class="sites-navigation-link topLevel">Files</a></div></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="../../../ocm-questions-and-answers.html" jotId="wuid:gx:745e829206f7de92" class="sites-navigation-link topLevel">OCM Questions and Answers</a></div></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="../../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:3ea149e43344b911" class="sites-navigation-link topLevel">Sitemap</a></div></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="../../../system/app/pages/recentChanges.html" jotId="wuid:gx:5e6c553dc0fa9062" class="sites-navigation-link topLevel">Recent site activity</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_417369500733912" class="sites-embed" role="complementary"><h4 class="sites-embed-title">Join Our Discussion</h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><p style="text-align:center"><a href="http://groups.google.com/support/bin/topic.py?topic=9216" target="_blank"><img border="0" src="../../../_/rsrc/1294140403248/config/app/images/psd-chat-icon-smaller.gif" /></a><br />
<a href="http://groups.google.com/support/bin/topic.py?topic=9216" target="_blank">Join the Discussion</a></p></div></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_35483861481770873" class="sites-embed" role="complementary"><h4 class="sites-embed-title">Template tips</h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><a href="https://sites.google.com/site/sitetemplateinfo/tips" target="_blank">Learn more about working with templates.</a><br /><br /><a href="https://sites.google.com/site/sitetemplateinfo/tips/customize-your-site-sidebar" target="_blank">How to change this sidebar.</a><br /></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../../home.html" dir="ltr">Home</A>‎ &gt; ‎<A href="../../11g-ocm.html" dir="ltr">11G OCM</A>‎ &gt; ‎<A href="../11g-ocm-data-and-data-warehouse-management.html" dir="ltr">11G OCM Data and Data Warehouse Management</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">11G OCM Troubleshoot fast materialized views to fast refresh and query rewrite</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed sites-embed-full-width" style="width:100%;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-References"><strong>1 </strong>References</a></li><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-Overview"><strong>2 </strong>Overview</a></li><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-Reading-Notes"><strong>3 </strong>Reading Notes</a><ol class="goog-toc"><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-Overview-of-the-SQL-Access-Advisor"><strong>3.1 </strong>Overview of the SQL Access Advisor</a></li><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-Tuning-Materialized-Views-for-Fast-Refresh-and-Query-Rewrite"><strong>3.2 </strong>Tuning Materialized Views for Fast Refresh and Query Rewrite</a></li><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-EXPLAIN_MVIEW"><strong>3.3 </strong>EXPLAIN_MVIEW</a></li><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-EXPLAIN_REWRITE"><strong>3.4 </strong>EXPLAIN_REWRITE</a></li></ol></li><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-Test-Case"><strong>4 </strong>Test Case</a><ol class="goog-toc"><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-Set-Up-Test-User"><strong>4.1 </strong>Set Up Test User</a></li><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-Using-TUNE_MVIEW"><strong>4.2 </strong>Using TUNE_MVIEW</a></li><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-Second-Attempt-with-TUNE_MVIEW"><strong>4.3 </strong>Second Attempt with TUNE_MVIEW</a></li><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-Using-EXPLAIN_MVIEW"><strong>4.4 </strong>Using EXPLAIN_MVIEW</a></li><li class="goog-toc"><a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html#TOC-Enable-Query-Rewrite"><strong>4.5 </strong>Enable Query Rewrite</a></li></ol></li></ol></div></div></div></div></div>
<br />
<h3><a name="TOC-References"></a>References</h3>
<p><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/toc.htm" rel="nofollow">Oracle® Database Performance Tuning Guide 11g Release 1 (11.1)</a></p>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/advisor.htm#insertedID0" rel="nofollow">Chapter 18, "SQL Access Advisor"</a></li>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/advisor.htm#CHDEEBAI" rel="nofollow">Overview of the SQL Access Advisor</a></li>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/advisor.htm#i1018993" rel="nofollow">Tuning Materialized Views for Fast Refresh and Query Rewrite</a></li>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/advisor.htm#autoId38" rel="nofollow">DBMS_ADVISOR.TUNE_MVIEW Procedure</a></li>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/advisor.htm#i1038234" rel="nofollow">TUNE_MVIEW Syntax and Operations</a></li>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/advisor.htm#i1038256" rel="nofollow">Accessing TUNE_MVIEW Output Results</a></li>
</ul>
</ul>
</ul>
</ul>
<p><a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/toc.htm" rel="nofollow">Oracle® Database PL/SQL Packages and Types Reference 11g Release 1 (11.1)</a></p>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_advis.htm#insertedID0" rel="nofollow">Chapter 17, "DBMS_ADVISOR"</a></li>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_advis.htm#i1010465" rel="nofollow"><span style="font-family:monospace">CREATE_FILE</span></a></li>
<li><a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_advis.htm#i1012023" rel="nofollow"><span style="font-family:monospace">GET_TASK_SCRIPT</span></a></li>
<li><a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_advis.htm#i1001342" rel="nofollow"><span style="font-family:monospace">TUNE_MVIEW</span></a></li>
</ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_mview.htm#insertedID0" rel="nofollow">Chapter 79, "DBMS_MVIEW"</a></li>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_mview.htm#CEGGEHHC" rel="nofollow"><span style="font-family:monospace">EXPLAIN_MVIEW</span></a></li>
<li><a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_mview.htm#i997015" rel="nofollow"><span style="font-family:monospace">EXPLAIN_REWRITE</span></a></li>
</ul>
</ul>
<p><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/toc.htm" rel="nofollow">Oracle® Database Reference 11g Release 1 (11.1)</a></p>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams_part.htm#i200948" rel="nofollow">Part I Initialization Parameters</a></li>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams189.htm#CHDDEIID" rel="nofollow"><span style="font-family:monospace">QUERY_REWRITE_ENABLED</span></a></li>
</ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_part.htm#i125539" rel="nofollow">Part II Static Data Dictionary Views</a></li>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_5065.htm#i1628398" rel="nofollow"><span style="font-family:monospace">DBA_TUNE_MVIEW</span></a></li>
</ul>
</ul>
<p><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/toc.htm" rel="nofollow">Oracle® Database SQL Language Reference 11g Release 1 (11.1)</a></p>
<ul>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6002.htm#i2063793" rel="nofollow"><span style="font-family:monospace">CREATE MATERIALIZED VIEW</span></a></li>
</ul>
<h3><a name="TOC-Overview"></a>Overview</h3>
<p>The objective from the <a href="http://education.oracle.com/pls/web_prod-plq-dad/db_pages.getpage?page_id=41&amp;p_exam_id=11gOCMU#3" rel="nofollow">11G OCM Upgrade Exam</a> is:</p>
<blockquote>Troubleshoot fast materialized views to fast refresh and query rewrite</blockquote>
<h3><a name="TOC-Reading-Notes"></a>Reading Notes</h3>
<h4><a name="TOC-Overview-of-the-SQL-Access-Advisor"></a>Overview of the SQL Access Advisor</h4>
<p>“<a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/advisor.htm#CHDEEBAI" rel="nofollow">Overview of the SQL Access Advisor</a>” says that:</p>
<blockquote>
<p>The SQL Access Advisor, using the <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_advis.htm#i1001342" rel="nofollow"><span style="font-family:monospace">TUNE_MVIEW</span></a> procedure, also recommends how to optimize materialized views so that they can be fast refreshable and take advantage of general query rewrite.</p>
</blockquote>
<h4><a name="TOC-Tuning-Materialized-Views-for-Fast-Refresh-and-Query-Rewrite"></a>Tuning Materialized Views for Fast Refresh and Query Rewrite</h4>
<p>“<a href="http://docs.oracle.com/cd/B28359_01/server.111/b28274/advisor.htm#i1018993" rel="nofollow">Tuning Materialized Views for Fast Refresh and Query Rewrite</a>” says that:</p>
<blockquote>
<p>To further facilitate the use of materialized views, the <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_advis.htm#i1001342" rel="nofollow"><span style="font-family:monospace">TUNE_MVIEW</span></a> procedure shows you how to optimize your <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6002.htm#i2063793" rel="nofollow"><span style="font-family:monospace">CREATE MATERIALIZED VIEW</span></a> statement and to meet other requirements such as materialized view log and rewrite equivalence relationship for fast refresh and general query rewrite. <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_advis.htm#i1001342" rel="nofollow"><span style="font-family:monospace">TUNE_MVIEW</span></a> analyzes and processes the <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6002.htm#i2063793" rel="nofollow"><span style="font-family:monospace">CREATE MATERIALIZED VIEW</span></a> statement and generates two sets of output results: one for the materialized view implementation and the other for undoing the <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6002.htm#i2063793" rel="nofollow"><span style="font-family:monospace">CREATE MATERIALIZED VIEW</span></a> operations. The two sets of output results can be accessed through views or be stored in external script files created by the SQL Access Advisor. These external script files are ready to execute to implement the materialized view.</p>
</blockquote>
<h4><a name="TOC-EXPLAIN_MVIEW"></a>EXPLAIN_MVIEW</h4>
<p>“<a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_mview.htm#CEGGEHHC" rel="nofollow"><span style="font-family:monospace">EXPLAIN_MVIEW</span></a>” says that:</p>
<blockquote>
<p>This procedure enables you to learn what is possible with a materialized view or potential materialized view. For example, you can determine if a materialized view is fast refreshable and what types of query rewrite you can perform with a particular materialized view.</p>
</blockquote>
<h4><a name="TOC-EXPLAIN_REWRITE"></a>EXPLAIN_REWRITE</h4>
<p>“<a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_mview.htm#i997015" rel="nofollow"><span style="font-family:monospace">EXPLAIN_REWRITE</span></a>” says that:</p>
<blockquote>
<p>This procedure enables you to learn why a query failed to rewrite, or, if it rewrites, which materialized views will be used. Using the results from the procedure, you can take the appropriate action needed to make a query rewrite if at all possible.</p>
</blockquote>
<h3><a name="TOC-Test-Case"></a>Test Case</h3>
<h4><a name="TOC-Set-Up-Test-User"></a>Set Up Test User</h4>
<p>The <span style="font-family:monospace">SH</span> user is set up for the test as follows:</p>
<blockquote style="font-family:monospace">
ALTER USER sh ACCOUNT UNLOCK;<br />
GRANT ADVISOR, CREATE MATERIALIZED VIEW TO sh;<br />
</blockquote>
<h4><a name="TOC-Using-TUNE_MVIEW"></a>Using TUNE_MVIEW</h4>
<p>Using the test query from <a href="11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite.html">Use SQL Tuning Advisor</a>, I attempted to invoke the <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_advis.htm#i1001342" rel="nofollow"><span style="font-family:monospace">TUNE_MVIEW</span></a> procedure as the <span style="font-family:monospace">SH</span> user:</p>
<blockquote style="font-family:monospace">
DECLARE<br />
  sql_text VARCHAR2(4000);<br />
  task_name VARCHAR2(32);<br />
BEGIN<br />
sql_text := '<a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6002.htm#i2063793" rel="nofollow">CREATE MATERIALIZED VIEW</a> ocm11g AS -<br />
SELECT -<br />
    products.prod_category, -<br />
    products.prod_subcategory, -<br />
    times.calendar_year, -<br />
    SUM( sales.quantity_sold ) -<br />
      AS total_quantity_sold, -<br />
    SUM( sales.amount_sold ) -<br />
      AS total_amount_sold -<br />
  FROM -<br />
      sales -<br />
    INNER JOIN -<br />
      products -<br />
    USING( prod_id ) -<br />
    INNER JOIN -<br />
      customers -<br />
    USING( cust_id ) -<br />
    INNER JOIN -<br />
      countries -<br />
    USING( country_id ) -<br />
    INNER JOIN -<br />
      channels -<br />
    USING( channel_id ) -<br />
    INNER JOIN -<br />
      times -<br />
    USING( time_id ) -<br />
  WHERE -<br />
      products.prod_valid = ''A'' -<br />
    AND -<br />
      channels.channel_class = ''Direct'' -<br />
    AND -<br />
      customers.cust_valid = ''A'' -<br />
    AND -<br />
      countries.country_name = ''Australia'' -<br />
  GROUP BY -<br />
    products.prod_category, -<br />
    products.prod_subcategory, -<br />
    times.calendar_year -<br />
  ORDER BY -<br />
    products.prod_category, -<br />
    products.prod_subcategory, -<br />
    times.calendar_year';<br />
task_name := 'OCM11G';<br />
dbms_advisor.<a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_advis.htm#i1001342" rel="nofollow">TUNE_MVIEW</a>( task_name, sql_text );<br />
END;<br />
/<br />
</blockquote>
<p>However, this fails with the following error messages:</p>
<pre>ERROR at line 1:
ORA-13600: error encountered in Advisor
QSM-03112: Invalid CREATE MATERIALIZED VIEW statement
ORA-00928: missing SELECT keyword
ORA-06512: at "SYS.DBMS_SYS_ERROR", line 86
ORA-06512: at "SYS.PRVT_ACCESS_ADVISOR", line 205
ORA-06512: at "SYS.PRVT_TUNE_MVIEW", line 460
ORA-06512: at "SYS.PRVT_TUNE_MVIEW", line 901
ORA-06512: at "SYS.DBMS_ADVISOR", line 734
ORA-06512: at line 48
</pre>
<p>When I execute the script for the materialized view by itself, the materialized view is created successfully.</p>
<h4><a name="TOC-Second-Attempt-with-TUNE_MVIEW"></a>Second Attempt with TUNE_MVIEW</h4>
<p>I decided to use a simpler materialized view to test the <a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_advis.htm#i1001342" rel="nofollow"><span style="font-family:monospace">TUNE_MVIEW</span></a> procedure:</p>
<blockquote style="font-family:monospace">
variable task_name varchar2(32)<br />
variable sql_text varchar2(4000)<br />
exec :task_name := 'OCM11GPROD'<br />
exec :sql_text := 'CREATE MATERIALIZED VIEW ocm11g_prod AS  select prod_category, count(*) as num_products from products group by prod_category'<br />
exec dbms_advisor.tune_mview( :task_name, :sql_text )<br />
</blockquote>
<p>This worked fine. The results from <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_5065.htm#i1628398" rel="nofollow"><span style="font-family:monospace">DBA_TUNE_MVIEW</span></a> are:</p>
<blockquote style="font-family:monospace">
SELECT * FROM <a href="http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_5065.htm#i1628398" rel="nofollow">DBA_TUNE_MVIEW</a> WHERE task_name = 'OCM11GPROD';
</blockquote>
<table border="1" cellpadding="0" cellspacing="0">
<thead>
<tr> <th>OWNER</th>
<th>TASK_NAME</th>
<th>ACTION_ID</th>
<th>SCRIPT_TYPE</th>
<th>STATEMENT</th>
</tr>
</thead>
<tbody>
<tr>
<td>SH</td>
<td>OCM11GPROD</td>
<td align="right">3</td>
<td>IMPLEMENTATION</td>
<td>CREATE MATERIALIZED VIEW LOG ON "SH"."PRODUCTS" WITH ROWID, SEQUENCE ("PROD_CATEGORY")  INCLUDING NEW VALUES</td>
</tr>
<tr>
<td>SH</td>
<td>OCM11GPROD</td>
<td align="right">4</td>
<td>IMPLEMENTATION</td>
<td>ALTER MATERIALIZED VIEW LOG FORCE ON "SH"."PRODUCTS" ADD ROWID, SEQUENCE ("PROD_CATEGORY")  INCLUDING NEW VALUES</td>
</tr>
<tr>
<td>SH</td>
<td>OCM11GPROD</td>
<td align="right">5</td>
<td>IMPLEMENTATION</td>
<td>CREATE MATERIALIZED VIEW SH.OCM11G_PROD   REFRESH FAST WITH ROWID DISABLE QUERY REWRITE AS SELECT SH.PRODUCTS.PROD_CATEGORY C1, COUNT(*) M1 FROM SH.PRODUCTS GROUP BY SH.PRODUCTS.PROD_CATEGORY</td>
</tr>
<tr>
<td>SH</td>
<td>OCM11GPROD</td>
<td align="right">6</td>
<td>UNDO</td>
<td>DROP MATERIALIZED VIEW SH.OCM11G_PROD  </td>
</tr>
</tbody></table>
<p>It appears that I can make the materialized view fast refreshable, but query rewrite is disabled.</p>
<h4><a name="TOC-Using-EXPLAIN_MVIEW"></a>Using EXPLAIN_MVIEW</h4>
<p>First, the user, <span style="font-family:monospace">SH</span>, is granted the appropriate authorities:</p>
<blockquote style="font-family:monospace">
GRANT CREATE TABLE TO sh;
</blockquote>
<p>Then, the user, <span style="font-family:monospace">SH</span>, creates the <span style="font-family:monospace">MV_CAPABILITIES_TABLE</span>:</p>
<blockquote style="font-family:monospace">
@?/rdbms/admin/utlxmv
</blockquote>
<p>Next, the first materialized view created above, <span style="font-family:monospace">OCM11G</span>, is examined:</p>
<blockquote style="font-family:monospace">
EXEC DBMS_MVIEW.<a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_mview.htm#CEGGEHHC" rel="nofollow">EXPLAIN_MVIEW</a>( 'OCM11G', 'OCM11G' )<br />
COMMIT;<br />
SELECT CAPABILITY_NAME,<br />
  POSSIBLE,<br />
  RELATED_TEXT,<br />
  MSGNO,<br />
  MSGTXT<br />
FROM mv_capabilities_table<br />
WHERE statement_id = 'OCM11G';<br />
</blockquote>
<p>The result is:</p>
<table border="1" cellpadding="0" cellspacing="0">
<thead>
<tr> <th>CAPABILITY_NAME</th>
<th>POSSIBLE</th>
<th>RELATED_TEXT</th>
<th>MSGNO</th>
<th>MSGTXT</th>
</tr>
</thead>
<tbody>
<tr>
<td>PCT</td>
<td>Y</td>
<td> </td>
<td align="right"> </td>
<td> </td>
</tr>
<tr>
<td>REFRESH_COMPLETE</td>
<td>Y</td>
<td> </td>
<td align="right"> </td>
<td> </td>
</tr>
<tr>
<td>REFRESH_FAST</td>
<td>Y</td>
<td> </td>
<td align="right"> </td>
<td> </td>
</tr>
<tr>
<td>REWRITE</td>
<td>N</td>
<td> </td>
<td align="right"> </td>
<td> </td>
</tr>
<tr>
<td>PCT_TABLE</td>
<td>Y</td>
<td>SALES</td>
<td align="right"> </td>
<td> </td>
</tr>
<tr>
<td>PCT_TABLE</td>
<td>N</td>
<td>PRODUCTS</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
<tr>
<td>PCT_TABLE</td>
<td>N</td>
<td>CUSTOMERS</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
<tr>
<td>PCT_TABLE</td>
<td>N</td>
<td>COUNTRIES</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
<tr>
<td>PCT_TABLE</td>
<td>N</td>
<td>CHANNELS</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
<tr>
<td>PCT_TABLE</td>
<td>N</td>
<td>TIMES</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_INSERT</td>
<td>N</td>
<td>SH.SALES</td>
<td align="right">2162</td>
<td>the detail table does not have a materialized view log</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_INSERT</td>
<td>N</td>
<td>SH.PRODUCTS</td>
<td align="right">2162</td>
<td>the detail table does not have a materialized view log</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_INSERT</td>
<td>N</td>
<td>SH.CUSTOMERS</td>
<td align="right">2162</td>
<td>the detail table does not have a materialized view log</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_INSERT</td>
<td>N</td>
<td>SH.COUNTRIES</td>
<td align="right">2162</td>
<td>the detail table does not have a materialized view log</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_INSERT</td>
<td>N</td>
<td>SH.CHANNELS</td>
<td align="right">2162</td>
<td>the detail table does not have a materialized view log</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_INSERT</td>
<td>N</td>
<td>SH.TIMES</td>
<td align="right">2162</td>
<td>the detail table does not have a materialized view log</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_ONETAB_DML</td>
<td>N</td>
<td>TOTAL_AMOUNT_SOLD</td>
<td align="right">2143</td>
<td>SUM(expr) without COUNT(expr)</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_ONETAB_DML</td>
<td>N</td>
<td>TOTAL_QUANTITY_SOLD</td>
<td align="right">2143</td>
<td>SUM(expr) without COUNT(expr)</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_ONETAB_DML</td>
<td>N</td>
<td> </td>
<td align="right">2146</td>
<td>see the reason why REFRESH_FAST_AFTER_INSERT is disabled</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_ONETAB_DML</td>
<td>N</td>
<td> </td>
<td align="right">2142</td>
<td>COUNT(*) is not present in the select list</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_ONETAB_DML</td>
<td>N</td>
<td> </td>
<td align="right">2143</td>
<td>SUM(expr) without COUNT(expr)</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_ANY_DML</td>
<td>N</td>
<td> </td>
<td align="right">2161</td>
<td>see the reason why REFRESH_FAST_AFTER_ONETAB_DML is disabled</td>
</tr>
<tr>
<td>REFRESH_FAST_PCT</td>
<td>Y</td>
<td> </td>
<td align="right"> </td>
<td> </td>
</tr>
<tr>
<td>REWRITE_FULL_TEXT_MATCH</td>
<td>N</td>
<td> </td>
<td align="right">2159</td>
<td>query rewrite is disabled on the materialized view</td>
</tr>
<tr>
<td>REWRITE_PARTIAL_TEXT_MATCH</td>
<td>N</td>
<td> </td>
<td align="right">2159</td>
<td>query rewrite is disabled on the materialized view</td>
</tr>
<tr>
<td>REWRITE_GENERAL</td>
<td>N</td>
<td> </td>
<td align="right">2159</td>
<td>query rewrite is disabled on the materialized view</td>
</tr>
<tr>
<td>REWRITE_PCT</td>
<td>N</td>
<td> </td>
<td align="right">2158</td>
<td>general rewrite is not possible or PCT is not possible on any of the detail tables</td>
</tr>
<tr>
<td>PCT_TABLE_REWRITE</td>
<td>N</td>
<td>SALES</td>
<td align="right">2182</td>
<td>PCT is enabled through a join dependency</td>
</tr>
<tr>
<td>PCT_TABLE_REWRITE</td>
<td>N</td>
<td>PRODUCTS</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
<tr>
<td>PCT_TABLE_REWRITE</td>
<td>N</td>
<td>CUSTOMERS</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
<tr>
<td>PCT_TABLE_REWRITE</td>
<td>N</td>
<td>COUNTRIES</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
<tr>
<td>PCT_TABLE_REWRITE</td>
<td>N</td>
<td>CHANNELS</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
<tr>
<td>PCT_TABLE_REWRITE</td>
<td>N</td>
<td>TIMES</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
</tbody></table>
<p>And, the second materialized view created above, <span style="font-family:monospace">OCM11G_PROD</span>, is examined:</p>
<blockquote style="font-family:monospace">
EXEC DBMS_MVIEW.<a href="http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_mview.htm#CEGGEHHC" rel="nofollow">EXPLAIN_MVIEW</a>( 'OCM11G_PROD', 'OCM11G2' )<br />
COMMIT;<br />
SELECT CAPABILITY_NAME,<br />
  POSSIBLE,<br />
  RELATED_TEXT,<br />
  MSGNO,<br />
  MSGTXT<br />
FROM mv_capabilities_table<br />
WHERE statement_id = 'OCM11G2';<br />
</blockquote>
<p>The result is:</p>
<table border="1" cellpadding="0" cellspacing="0">
<thead>
<tr> <th>CAPABILITY_NAME</th>
<th>POSSIBLE</th>
<th>RELATED_TEXT</th>
<th>MSGNO</th>
<th>MSGTXT</th>
</tr>
</thead>
<tbody>
<tr>
<td>PCT</td>
<td>N</td>
<td> </td>
<td align="right"> </td>
<td> </td>
</tr>
<tr>
<td>REFRESH_COMPLETE</td>
<td>Y</td>
<td> </td>
<td align="right"> </td>
<td> </td>
</tr>
<tr>
<td>REFRESH_FAST</td>
<td>N</td>
<td> </td>
<td align="right"> </td>
<td> </td>
</tr>
<tr>
<td>REWRITE</td>
<td>N</td>
<td> </td>
<td align="right"> </td>
<td> </td>
</tr>
<tr>
<td>PCT_TABLE</td>
<td>N</td>
<td>PRODUCTS</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_INSERT</td>
<td>N</td>
<td>SH.PRODUCTS</td>
<td align="right">2162</td>
<td>the detail table does not have a materialized view log</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_ONETAB_DML</td>
<td>N</td>
<td> </td>
<td align="right">2146</td>
<td>see the reason why REFRESH_FAST_AFTER_INSERT is disabled</td>
</tr>
<tr>
<td>REFRESH_FAST_AFTER_ANY_DML</td>
<td>N</td>
<td> </td>
<td align="right">2161</td>
<td>see the reason why REFRESH_FAST_AFTER_ONETAB_DML is disabled</td>
</tr>
<tr>
<td>REFRESH_FAST_PCT</td>
<td>N</td>
<td> </td>
<td align="right">2157</td>
<td>PCT is not possible on any of the detail tables in the materialized view</td>
</tr>
<tr>
<td>REWRITE_FULL_TEXT_MATCH</td>
<td>N</td>
<td> </td>
<td align="right">2159</td>
<td>query rewrite is disabled on the materialized view</td>
</tr>
<tr>
<td>REWRITE_PARTIAL_TEXT_MATCH</td>
<td>N</td>
<td> </td>
<td align="right">2159</td>
<td>query rewrite is disabled on the materialized view</td>
</tr>
<tr>
<td>REWRITE_GENERAL</td>
<td>N</td>
<td> </td>
<td align="right">2159</td>
<td>query rewrite is disabled on the materialized view</td>
</tr>
<tr>
<td>REWRITE_PCT</td>
<td>N</td>
<td> </td>
<td align="right">2158</td>
<td>general rewrite is not possible or PCT is not possible on any of the detail tables</td>
</tr>
<tr>
<td>PCT_TABLE_REWRITE</td>
<td>N</td>
<td>PRODUCTS</td>
<td align="right">2068</td>
<td>relation is not a partitioned table</td>
</tr>
</tbody></table>
<h4><a name="TOC-Enable-Query-Rewrite"></a>Enable Query Rewrite</h4>
<p>In both of the materialized views examined above, query rewrite is disabled .</p>
</div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://accounts.google.com/ServiceLogin?continue=https://dfhawthorne.github.io/home/11g-ocm/11g-ocm-data-and-data-warehouse-management/11g-ocm-troubleshoot-fast-materialized-views-to-fast-refresh-and-query-rewrite&amp;service=jotspot">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com/site">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/3168fb/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("2bd", "Navigation", true);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_2bd');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXtwJWRXX8hw9vwjI_7S-fFZEG3nbbBAHd-fhDvJaUBkqLewHQYsWqQXa7EK18OehQe2q6_12M_KOXJD32El7594NONDcEiPG54bf-ooEbUF9v-f5jXwaOAFJBPdgDSCuOdB9r5k/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([1109635200000, 1128902400000, 1130657000000, 1143333000000, 1143806400000, 1145000000000, 1146380000000, 1152489600000, 1159800000000, 1159500000000, 1162095000000, 1162075000000, 1162105500000]);
    gsites.Xhr.send('https://dfhawthorne.github.io/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<script type="text/javascript">
          sites.codeembed.init();
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
