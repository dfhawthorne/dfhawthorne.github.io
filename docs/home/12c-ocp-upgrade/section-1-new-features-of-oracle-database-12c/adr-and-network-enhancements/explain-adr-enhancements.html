---
layout: default
title: 'Explain ADR Enhancements'
base-url: home/12c-ocp-upgrade/section-1-new-features-of-oracle-database-12c/adr-and-network-enhancements/explain-adr-enhancements.html
breadcrumbs:
- title: 'Home'
  url: home.html
- title: '12C OCP Upgrade'
  url: home/12c-ocp-upgrade.html
- title: 'Section 1: New Features of Oracle Database 12c'
  url: home/12c-ocp-upgrade/section-1-new-features-of-oracle-database-12c.html
- title: 'ADR and Network Enhancements'
  url: home/12c-ocp-upgrade/section-1-new-features-of-oracle-database-12c/adr-and-network-enhancements.html
- title: 'Explain ADR Enhancements'
  url: home/12c-ocp-upgrade/section-1-new-features-of-oracle-database-12c/adr-and-network-enhancements/explain-adr-enhancements.html
table-of-contents:
- toc-url: Explain-ADR-enhancements
  toc-text: Explain ADR enhancements
  toc-menu:
  - toc-url: Summary
    toc-text: Summary
  - toc-url: References
    toc-text: References
  - toc-url: DDL-Log
    toc-text: DDL Log
    toc-menu:
    - toc-url: Description
      toc-text: Description
    - toc-url: Licence-Required
      toc-text: Licence Required
    - toc-url: Not-All-DDL-is-Logged
      toc-text: Not All DDL is Logged
    - toc-url: Demonstration-Script
      toc-text: Demonstration Script
  - toc-url: Debug-Log
    toc-text: Debug Log
- toc-url: New-File-types
  toc-text: New File types
- toc-url: New-File-locations
  toc-text: New File locations
- toc-url: New-command-for-ADRCI
  toc-text: New command for ADRCI
---
<div dir="ltr">
 <br/>
 <h2>
  <a name="TOC-Explain-ADR-enhancements">
  </a>
  Explain ADR enhancements
 </h2>
 <h3>
  <a name="TOC-Summary">
  </a>
  Summary
 </h3>
 <p>
  DDL log logs certain DDL statements when enabled through a system parameter. A management pack licence is required to use this feature.
 </p>
 <p>
  Debug log has entries for certain warnings and state information that used to be in the alert log.
 </p>
 <h3>
  <a name="TOC-References">
  </a>
  References
 </h3>
 <ul>
  <li>
   <a href="https://docs.oracle.com/database/121/DBLIC/toc.htm" rel="nofollow">
    Oracle
    <sup>
     ®
    </sup>
    12.1 Database Licensing Information User Manual
   </a>
  </li>
  <ul>
   <li>
    <a href="https://docs.oracle.com/database/121/DBLIC/options.htm#DBLIC139" rel="nofollow">
     2 Options and Packs
    </a>
   </li>
   <ul>
    <li>
     <a href="https://docs.oracle.com/database/121/DBLIC/options.htm#CIHGFIAF" rel="nofollow">
      Oracle Management Packs
     </a>
    </li>
    <ul>
     <li>
      <a href="https://docs.oracle.com/database/121/DBLIC/options.htm#DBLIC2175" rel="nofollow">
       Oracle Database Lifecycle Management Pack for Oracle Database
      </a>
     </li>
    </ul>
   </ul>
  </ul>
  <li>
   <a href="https://docs.oracle.com/database/121/REFRN/toc.htm" rel="nofollow">
    Oracle
    <sup>
     ®
    </sup>
    12.1 Database Reference
   </a>
  </li>
  <ul>
   <li>
    <a href="https://docs.oracle.com/database/121/REFRN/GUID-FD266F6F-D047-4EBB-8D96-B51B1DCA2D61.htm#REFRN-GUID-FD266F6F-D047-4EBB-8D96-B51B1DCA2D61" rel="nofollow">
     1 Initialization Parameters
    </a>
   </li>
   <ul>
    <li>
     <a href="https://docs.oracle.com/database/121/REFRN/GUID-6FBA6147-D545-4E7D-94F0-A97EC1C721AE.htm#REFRN10302" rel="nofollow">
      1.90 ENABLE_DDL_LOGGING
     </a>
    </li>
   </ul>
  </ul>
  <li>
   <a href="https://docs.oracle.com/database/121/ADMIN/toc.htm" rel="nofollow">
    Oracle
    <sup>
     ®
    </sup>
    12.1 Database Administrator's Guide
   </a>
  </li>
  <ul>
   <li>
    <a href="https://docs.oracle.com/database/121/ADMIN/diag.htm" rel="nofollow">
     9 Managing Diagnostic Data
    </a>
   </li>
   <ul>
    <li>
     <a href="https://docs.oracle.com/database/121/ADMIN/diag.htm#ADMIN11007" rel="nofollow">
      9.1 About the Oracle Database Fault Diagnosability Infrastructure
     </a>
    </li>
    <ul>
     <li>
      <a href="https://docs.oracle.com/database/121/ADMIN/diag.htm#ADMIN11260" rel="nofollow">
       9.1.3 Fault Diagnosability Infrastructure Components
      </a>
     </li>
     <ul>
      <li>
       <a href="https://docs.oracle.com/database/121/ADMIN/diag.htm#ADMIN14021" rel="nofollow">
        9.1.3.4 DDL Log
       </a>
      </li>
      <li>
       <a href="https://docs.oracle.com/database/121/ADMIN/diag.htm#ADMIN14022" rel="nofollow">
        9.1.3.5 Debug Log
       </a>
      </li>
     </ul>
    </ul>
   </ul>
  </ul>
 </ul>
 <h3>
  <a name="TOC-DDL-Log">
  </a>
  DDL Log
 </h3>
 <h4>
  <a name="TOC-Description">
  </a>
  Description
 </h4>
 <p>
  <a href="https://docs.oracle.com/database/121/ADMIN/diag.htm#ADMIN14021" rel="nofollow">
   9.1.3.4 DDL Log
  </a>
  says:
 </p>
 <blockquote>
  <p>
   The data definition language (DDL) log is a file that has the same format and basic behavior as the alert log, but it only contains the DDL statements issued by the database.
  </p>
  <p>
   The DDL log is created only for the RDBMS component and only if the ENABLE_DDL_LOGGING initialization parameter is set to TRUE. When this parameter is set to FALSE, DDL statements are not included in any log.
  </p>
  <p>
   The DDL log contains one log record for each DDL statement issued by the database. The DDL log is included in IPS incident packages.
  </p>
  <p>
   There are two DDL logs that contain the same information. One is an XML file, and the other is a text file. The DDL log is stored in the log/ddl subdirectory of the ADR home.
  </p>
  <p>
  </p>
 </blockquote>
 <p>
  This is not strictly true—only certain DDL statements are logged. See below for details.
 </p>
 <h4>
  <a name="TOC-Licence-Required">
  </a>
  Licence Required
 </h4>
 <p>
  <a href="https://docs.oracle.com/database/121/DBLIC/options.htm#DBLIC2175" rel="nofollow">
   Oracle Database Lifecycle Management Pack for Oracle Database
  </a>
  says that
  <a href="https://docs.oracle.com/database/121/REFRN/GUID-6FBA6147-D545-4E7D-94F0-A97EC1C721AE.htm#REFRN10302" rel="nofollow" style="font-family:monospace;background-color:cornsilk">
   ENABLE_DDL_LOGGING
  </a>
  is a licensed parameter:
 </p>
 <blockquote>
  <p>
   <span style="font-weight:bold">
    The
    <code dir="ltr" style="background-color:cornsilk">
     init
    </code>
    .
    <code dir="ltr" style="background-color:cornsilk">
     ora
    </code>
    parameter
    <code dir="ltr" style="background-color:cornsilk">
     ENABLE_DDL_LOGGING
    </code>
    is licensed as part of the Database Lifecycle Management Pack when set to
    <code dir="ltr" style="background-color:cornsilk">
     TRUE
    </code>
   </span>
   . When set to
   <code dir="ltr" style="background-color:cornsilk">
    TRUE
   </code>
   , the database reports schema changes in real time into the database alert log under the message group schema_ddl. The default setting is
   <code dir="ltr" style="background-color:cornsilk">
    FALSE
   </code>
   .
  </p>
  <p style="text-align:right;font-weight:bold">
   Emphasis Mine
  </p>
 </blockquote>
 <h4>
  <a name="TOC-Not-All-DDL-is-Logged">
  </a>
  Not All DDL is Logged
 </h4>
 <p>
  Based on
  <a href="https://docs.oracle.com/database/121/REFRN/GUID-6FBA6147-D545-4E7D-94F0-A97EC1C721AE.htm#REFRN10302" rel="nofollow">
   1.90 ENABLE_DDL_LOGGING
  </a>
  , the following table summarises the DDL statements that are logged:
 </p>
 <table border="1">
  <thead>
   <tr>
    <th>
     Object
    </th>
    <th>
     ALTER
    </th>
    <th>
     CREATE
    </th>
    <th>
     DROP
    </th>
    <th>
     RENAME
    </th>
    <th>
     TRUNCATE
    </th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td>
     CLUSTER
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
   </tr>
   <tr>
    <td>
     FUNCTION
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     INDEX
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     OUTLINE
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     PACKAGE BODY
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     PROCEDURE
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     PROFILE
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     SEQUENCE
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     SYNONYM
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     TABLE
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
   </tr>
   <tr>
    <td>
     TRIGGER
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     TYPE
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     TYPE BODY
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     USER
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
   <tr>
    <td>
     VIEW
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:green">
     ☑
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
    <td align="center" style="background-color:red">
     ☒
    </td>
   </tr>
  </tbody>
 </table>
 <p>
  I presume that
  <span style="font-family:monospace;background-color:cornsilk">
   ALTER USER
  </span>
  and
  <span style="font-family:monospace;background-color:cornsilk">
   CREATE USER
  </span>
  are excluded because these commands can contain passwords.
 </p>
 <p>
  Objects that are not included are:
 </p>
 <ul>
  <li>
   CONTEXT
  </li>
  <li>
   DATABASE LINK — commands involving this object contains plain-text passwords.
  </li>
  <li>
   DIMENSION
  </li>
  <li>
   DIRECTORY
  </li>
  <li>
   EDITION
  </li>
  <li>
   INDEXTYPE
  </li>
  <li>
   JAVA
  </li>
  <li>
   LIBRARY
  </li>
  <li>
   MATERIALIZED VIEW
  </li>
  <li>
   MATERIALIZED VIEW LOG
  </li>
  <li>
   MATERIALIZED VIEW ZONEMAP
  </li>
  <li>
   OPERATOR
  </li>
  <li>
   ROLE
  </li>
  <li>
   SCHEMA
  </li>
 </ul>
 <h4>
  <a name="TOC-Demonstration-Script">
  </a>
  Demonstration Script
 </h4>
 <p>
  A simple demonstration script is:
 </p>
 <pre style="background-color:lightgreen;border:5px groove black;margin-left:10px;padding:2px">sqlplus / as sysdba &lt;&lt;DONE
REM ============================================================================
REM Connect to PLUM PDB
REM ============================================================================
ALTER SESSION SET CONTAINER=plum;
REM ============================================================================
REM Enable DDL Logging
REM ============================================================================
ALTER SYSTEM SET enable_ddl_logging=true SCOPE=MEMORY;
REM ============================================================================
REM Create OE Demo User
REM ============================================================================
CREATE USER oe_demo IDENTIFIED BY oe_demo;
GRANT CREATE SESSION, CREATE TABLE, CREATE VIEW TO oe_demo;
ALTER USER oe_demo QUOTA UNLIMITED ON users;
REM ============================================================================
REM Connect as OE Demo User
REM ============================================================================
CONNECT oe_demo/oe_demo@plum
CREATE SCHEMA AUTHORIZATION oe_demo
   CREATE TABLE new_product 
      (color VARCHAR2(10)  PRIMARY KEY, quantity NUMBER) 
   CREATE VIEW new_product_view 
      AS SELECT color, quantity FROM new_product WHERE color = 'RED'; 
      
CREATE TABLE new_product2 
      (color VARCHAR2(10)  PRIMARY KEY, quantity NUMBER);
CREATE VIEW new_product_view2
      AS SELECT color, quantity FROM new_product2 WHERE color = 'RED'; 
REM ============================================================================
REM Remove OE Demo User
REM ============================================================================
CONNECT / as sysdba
ALTER SESSION SET CONTAINER=plum;
DROP USER oe_demo CASCADE;
EXIT
DONE
adrci &lt;&lt;DONE
set home jar
show log -term
exit
DONE
</pre>
 <p>
  The output from DDL log is:
 </p>
 <pre style="background-color:#7ccdf8;border:5px groove black;margin-left:10px;padding:2px">ADR Home = /opt/app/oracle/diag/rdbms/jar/jar:
*************************************************************************
2018-04-13 20:11:46.483000 +10:00
CREATE TABLE new_product2
      (color VARCHAR2(10)  PRIMARY KEY, quantity NUMBER)
CREATE VIEW new_product_view2
      AS SELECT color, quantity FROM new_product2 WHERE color = 'RED'
DROP USER oe_demo CASCADE
</pre>
 <p>
  As expected, only the
  <span style="font-family:monospace;background-color:cornsilk">
   CREATE TABLE
  </span>
  and
  <span style="font-family:monospace;background-color:cornsilk">
   CREATE VIEW
  </span>
  statements outside of the
  <span style="font-family:monospace;background-color:cornsilk">
   CREATE SCHEMA
  </span>
  were logged.
 </p>
 <p>
  The
  <span style="font-family:monospace;background-color:cornsilk">
   CREATE USER
  </span>
  and
  <span style="font-family:monospace;background-color:cornsilk">
   ALTER USER
  </span>
  statements were not logged, but the
  <span style="font-family:monospace;background-color:cornsilk">
   DROP USER
  </span>
  statement was logged.
 </p>
 <p>
  The
  <span style="font-family:monospace;background-color:cornsilk">
   SHOW LOG
  </span>
  command displays the contents of the DDL log through ADRCI.
 </p>
 <h3>
  <a name="TOC-Debug-Log">
  </a>
  Debug Log
 </h3>
 <p>
  <a href="https://docs.oracle.com/database/121/ADMIN/diag.htm#ADMIN14022" rel="nofollow">
   9.1.3.5 Debug Log
  </a>
  says:
 </p>
 <blockquote>
  <p>
   An Oracle Database component can detect conditions, states, or events that are unusual, but which do not inhibit correct operation of the detecting component. The component can issue a warning about these conditions, states, or events. The debug log is a file that records these warnings.
  </p>
  <p>
   These warnings recorded in the debug log are not serious enough to warrant an incident or a write to the alert log. They do warrant a record in a log file because they might be needed to diagnose a future problem.
  </p>
  <p>
   The debug log has the same format and basic behavior as the alert log, but it only contains information about possible problems that might need to be corrected.
  </p>
  <p>
   The debug log reduces the amount of information in the alert log and trace files. It also improves the visibility of debug information.
  </p>
  <p>
   The debug log is included in IPS incident packages. The debug log's contents are intended for Oracle Support. Database administrators should not use the debug log directly.
  </p>
 </blockquote>
 <h2>
  <a name="TOC-New-File-types">
  </a>
  New File types
 </h2>
 <ol>
  <li>
   DDL Log
  </li>
  <li>
   Debug Log
  </li>
 </ol>
 <h2>
  <a name="TOC-New-File-locations">
  </a>
  New File locations
 </h2>
 <ul>
  <li style="font-family:monospace">
   log
  </li>
  <ul>
   <li style="font-family:monospace">
    ddl
   </li>
   <ul>
    <li style="font-family:monospace">
     log.xml
    </li>
   </ul>
   <li style="font-family:monospace">
    ddl_jar.log
   </li>
   <li style="font-family:monospace">
    debug
   </li>
   <ul>
    <li style="font-family:monospace">
     ?
    </li>
   </ul>
   <li style="font-family:monospace">
    imdb
   </li>
   <ul>
    <li style="font-family:monospace">
     ?
    </li>
   </ul>
   <li style="font-family:monospace">
    test
   </li>
   <ul>
    <li style="font-family:monospace">
     ?
    </li>
   </ul>
  </ul>
 </ul>
 <h2>
  <a name="TOC-New-command-for-ADRCI">
  </a>
  New command for ADRCI
 </h2>
 <p>
  The new command is
  <a href="https://docs.oracle.com/database/121/SUTIL/GUID-568C0D01-CF56-4CFE-AD5B-160ECAD1B543.htm#SUTIL4211" rel="nofollow">
   SHOW LOG
  </a>
  . Sample session is:
 </p>
 <pre style="background-color:lightgreen;border:5px groove black;margin-left:10px;padding:2px">adrci&gt; set home jar
adrci&gt; show log -l ddl -term

ADR Home = /opt/app/oracle/diag/rdbms/jar/jar:
*************************************************************************
2018-04-13 20:11:46.483000 +10:00
CREATE TABLE new_product2
      (color VARCHAR2(10)  PRIMARY KEY, quantity NUMBER)
CREATE VIEW new_product_view2
      AS SELECT color, quantity FROM new_product2 WHERE color = 'RED'
DROP USER oe_demo CASCADE
2018-04-13 21:00:14.523000 +10:00
truncate table wri$_adv_addm_pdbs
adrci&gt; show log -l debug -term

ADR Home = /opt/app/oracle/diag/rdbms/jar/jar:
*************************************************************************
</pre>
</div>
