---
layout: default
title: 'Apply and review patches'
base-url: home/12c-ocp-upgrade/section-2-key-dba-skills/core-administration/apply-and-review-patches.html
breadcrumbs:
- title: 'Home'
  url: index.html
- title: '12C OCP Upgrade'
  url: home/12c-ocp-upgrade.html
- title: 'Section 2: Key DBA Skills'
  url: home/12c-ocp-upgrade/section-2-key-dba-skills.html
- title: 'Core Administration'
  url: home/12c-ocp-upgrade/section-2-key-dba-skills/core-administration.html
- title: 'Apply and review patches'
  url: home/12c-ocp-upgrade/section-2-key-dba-skills/core-administration/apply-and-review-patches.html
table-of-contents:
- toc-url: 'Overview'
  toc-text: 'Overview'
- toc-url: 'References'
  toc-text: 'References'
- toc-url: 'Procedure'
  toc-text: 'Procedure'
  toc-menu:
  - toc-url: 'Download-PSU-and-README'
    toc-text: 'Download PSU and README'
  - toc-url: 'Review-PSU-README'
    toc-text: 'Review PSU README'
  - toc-url: 'Get-Current-Version-of-OPatch'
    toc-text: 'Get Current Version of OPatch'
  - toc-url: 'Download-OPatch'
    toc-text: 'Download OPatch'
  - toc-url: 'Save-Old-Version-of-OPatch'
    toc-text: 'Save Old Version of OPatch'
  - toc-url: 'Install-New-Version-of-Patch'
    toc-text: 'Install New Version of Patch'
  - toc-url: 'Get-New-Version-of-OPatch'
    toc-text: 'Get New Version of OPatch'
  - toc-url: 'Environment-Checks'
    toc-text: 'Environment Checks'
  - toc-url: 'Unzip-PSU'
    toc-text: 'Unzip PSU'
  - toc-url: 'Interim-Patch-Conflict-Detection-and-Resolution'
    toc-text: 'Interim Patch Conflict Detection and Resolution'
  - toc-url: 'Shutdown-Listener-and-Database-Instances'
    toc-text: 'Shutdown Listener and Database Instances'
  - toc-url: 'Patch-Installation'
    toc-text: 'Patch Installation'
  - toc-url: 'Patch-Post-Installation'
    toc-text: 'Patch Post-Installation'
file-download-dir: 'home/12c-ocp-upgrade/section-2-key-dba-skills/core-administration/apply-and-review-patches'
file-download:
- 'apply_psu_201904_botany.log'
- 'apply_psu_201904_padstow.log'
---
<div dir="ltr">
 <br/>
 <h2>
  <a name="TOC-Overview">
  </a>
  Overview
 </h2>
 <p>
  I will apply
  <a href="https://support.oracle.com/epmos/faces/DocContentDisplay?id=29141015.8" rel="nofollow">
   APRIL 2019 PSU
  </a>
  for 12.1.0.2 to both
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  and
  <span style="font-family:monospace;background-color:#e6e6e6">
   BOTANY
  </span>
  .
 </p>
 <h2>
  <a name="TOC-References">
  </a>
  References
 </h2>
 <ul>
  <li>
   <a href="https://support.oracle.com/epmos/faces/DocContentDisplay?id=29141015.8" rel="nofollow">
    Bug 29141015 - 12.1.0.2.190416 (Apr 2019) Database Patch Set Update (DB PSU) (Doc ID 29141015.8)
   </a>
  </li>
  <li>
   <a href="https://updates.oracle.com/Orion/Services/download?type=readme&amp;aru=22785785#CBBFABAA" rel="nofollow">
    Patch 29141015 - Database Patch Set Update 12.1.0.2.190416
   </a>
  </li>
  <li>
   <a href="https://support.oracle.com/epmos/faces/DocContentDisplay?id=2265726.1" rel="nofollow">
    Applying Proactive Bundle / PSU Patch fails with Error: "chmod: changing permissions of `$ORACLE_HOME/bin/extjobO': Operation not permitted" (Doc ID 2265726.1)
   </a>
  </li>
 </ul>
 <h2>
  <a name="TOC-Procedure">
  </a>
  Procedure
 </h2>
 <h3>
  <a name="TOC-Download-PSU-and-README">
  </a>
  Download PSU and README
 </h3>
 <p>
  I downloaded
  <a href="https://support.oracle.com/epmos/faces/DocContentDisplay?id=29141015.8" rel="nofollow">
   P29141015
  </a>
  from
  <a href="https://support.oracle.com" rel="nofollow">
   Oracle Support
  </a>
  and saved it into
  <span style="font-family:monospace;background-color:#e6e6e6">
   /opt/share/Software/Patches
  </span>
  as
  <span style="font-family:monospace;background-color:#e6e6e6">
   p29141015_121020_Linux-x86-64.zip
  </span>
  .
 </p>
 <p>
  The
  <a href="https://updates.oracle.com/Orion/Services/download?type=readme&amp;aru=22785785#CBBFABAA" rel="nofollow">
   README
  </a>
  for this PSU was saved into
  <span style="font-family:monospace;background-color:#e6e6e6">
   /opt/share/Software/Patches/Patch 29141015 - Database Patch Set Update 12.1.0.2.190416.html
  </span>
  .
 </p>
 <h3>
  <a name="TOC-Review-PSU-README">
  </a>
  Review PSU README
 </h3>
 <p>
  The
  <a href="https://updates.oracle.com/Orion/Services/download?type=readme&amp;aru=22785785#CBBFABAA" rel="nofollow">
   README
  </a>
  for the APRIL 2019 PSU says:
 </p>
 <blockquote>
  <p>
   You must use the OPatch utility version 12.2.0.1.14 or later to apply this patch. Oracle recommends that you use the
              latest released OPatch version for 12.2, which is available for
              download from My Oracle Support patch
   <a href="https://updates.oracle.com/ARULink/PatchDetails/process_form?patch_num=6880880" rel="nofollow">
    6880880
   </a>
   by selecting the 12.2.0.1.0 release.
  </p>
 </blockquote>
 <h3>
  <a name="TOC-Get-Current-Version-of-OPatch">
  </a>
  Get Current Version of OPatch
 </h3>
 <p>
  On
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  , I ran the following command to get the current version of OPatch:
 </p>
 <pre class="bash-cmd">${ORACLE_HOME}/OPatch/opatch version</pre>
 <p>
  The output was
 </p>
 <pre class="text">OPatch Version: 12.1.0.1.3

OPatch succeeded.
</pre>
 <p>
  However, the output from
  <span style="font-family:monospace;background-color:#e6e6e6">
   BOTANY
  </span>
  was different:
 </p>
 <pre class="text">OPatch Version: 12.1.0.1.8

OPatch succeeded.
</pre>
 <p>
  I need to get the latest version of OPatch.
 </p>
 <h3>
  <a name="TOC-Download-OPatch">
  </a>
  Download OPatch
 </h3>
 <p>
  I downloaded OPatch into
  <span style="font-family:monospace;background-color:#e6e6e6">
   /opt/share/Software/OPatch/p6880880_122010_Linux-x86-64.zip
  </span>
  .
 </p>
 <p>
  The README was saved into
  <span style="font-family:monospace;background-color:#e6e6e6">
   /opt/share/Software/OPatch/Patch 6880880 OPatch 12.2.0.1.19.txt
  </span>
  .
 </p>
 <h3>
  <a name="TOC-Save-Old-Version-of-OPatch">
  </a>
  Save Old Version of OPatch
 </h3>
 <p>
  On
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  , I saved the old version of OPatch as follows:
 </p>
 <pre class="bash-cmd">cd ${ORACLE_HOME}
mv OPatch OPatch_12_1_0_1_3
</pre>
 <p>
  I repeated similar commands on
  <span style="font-family:monospace;background-color:#e6e6e6">
   BOTANY
  </span>
  :
 </p>
 <pre class="bash-cmd">cd ${ORACLE_HOME}
mv OPatch OPatch_12_1_0_1_8
</pre>
 <h3>
  <a name="TOC-Install-New-Version-of-Patch">
  </a>
  Install New Version of Patch
 </h3>
 <p>
  Ran the following command on both
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  and
  <span style="font-family:monospace;background-color:#e6e6e6">
   BOTANY
  </span>
  :
 </p>
 <pre class="bash-cmd">cd ${ORACLE_HOME}
unzip -q /opt/share/Software/OPatch/p6880880_122010_Linux-x86-64.zip
</pre>
 <h3>
  <a name="TOC-Get-New-Version-of-OPatch">
  </a>
  Get New Version of OPatch
 </h3>
 <p>
  On both
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  and
  <span style="font-family:monospace;background-color:#e6e6e6">
   BOTANY
  </span>
  , I ran the following command to get the current version of OPatch:
 </p>
 <pre class="bash-cmd">${ORACLE_HOME}/OPatch/opatch version</pre>
 <p>
  The output was
 </p>
 <pre class="text">OPatch Version: 12.2.0.1.19

OPatch succeeded.
</pre>
 <h3>
  <a name="TOC-Environment-Checks">
  </a>
  Environment Checks
 </h3>
 <p>
  On both
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  and
  <span style="font-family:monospace;background-color:#e6e6e6">
   BOTANY
  </span>
  , I ran the following command to validate the correct executables are in the path:
 </p>
 <pre class="bash-cmd">which make ar ld nm
</pre>
 <p>
  The output was the same on both systems:
 </p>
 <pre class="text">/usr/bin/make
/usr/bin/ar
/usr/bin/ld
/usr/bin/nm
</pre>
 <h3>
  <a name="TOC-Unzip-PSU">
  </a>
  Unzip PSU
 </h3>
 <p>
  On both
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  and
  <span style="font-family:monospace;background-color:#e6e6e6">
   BOTANY
  </span>
  , I ran the following commands to unzip the PSU:
 </p>
 <pre class="bash-cmd">mkdir /tmp/P29141015 
unzip -q /opt/share/Software/Patches/p29141015_121020_Linux-x86-64.zip -d /tmp/P29141015
</pre>
 <h3>
  <a name="TOC-Interim-Patch-Conflict-Detection-and-Resolution">
  </a>
  Interim Patch Conflict Detection and Resolution
 </h3>
 <p>
  On both
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  and
  <span style="font-family:monospace;background-color:#e6e6e6">
   BOTANY
  </span>
  , I ran the following commands to unzip the PSU:
 </p>
 <pre class="bash-cmd">cd /tmp/P29141015/29141015
${ORACLE_HOME}/OPatch/opatch prereq CheckConflictAgainstOHWithDetail -ph ./
</pre>
 <p>
  The output was similar on both systems:
 </p>
 <pre class="text">Oracle Interim Patch Installer version 12.2.0.1.19
Copyright (c) 2020, Oracle Corporation.  All rights reserved.

PREREQ session

Oracle Home       : /opt/app/oracle/product/12.1.0/dbhome_1
Central Inventory : /opt/app/oraInventory
   from           : /opt/app/oracle/product/12.1.0/dbhome_1/oraInst.loc
OPatch version    : 12.2.0.1.19
OUI version       : 12.1.0.2.0
Log file location : /opt/app/oracle/product/12.1.0/dbhome_1/cfgtoollogs/opatch/opatch2020-02-24_14-04-10PM_1.log

Invoking prereq "checkconflictagainstohwithdetail"

Prereq "checkConflictAgainstOHWithDetail" passed.

OPatch succeeded.
</pre>
 <h3>
  <a name="TOC-Shutdown-Listener-and-Database-Instances">
  </a>
  Shutdown Listener and Database Instances
 </h3>
 <p>
  On both
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  and
  <span style="font-family:monospace;background-color:#e6e6e6">
   BOTANY
  </span>
  , I ran the following command to stop the Oracle listener:
 </p>
 <pre class="bash-cmd">lsnrctl stop
</pre>
 <p>
  The output was similar on both systems:
 </p>
 <pre class="text">LSNRCTL for Linux: Version 12.1.0.2.0 - Production on 24-FEB-2020 14:07:02

Copyright (c) 1991, 2014, Oracle.  All rights reserved.

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=LISTENER)))
The command completed successfully
</pre>
 <p>
  On
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  only (the data guard standby was not running on
  <span style="font-family:monospace;background-color:#e6e6e6">
   BOTANY
  </span>
  ), I ran the following series of commands to stop the running Oracle database instances:
 </p>
 <pre class="text">[oracle@padstow 29141015]$ ps -ef|grep pmon
oracle     2555      1  0 08:58 ?        00:00:01 ora_pmon_jar
oracle    15619  11703  0 14:07 pts/1    00:00:00 grep pmon
[oracle@padstow 29141015]$ sqlplus / as sysdba

SQL*Plus: Release 12.1.0.2.0 Production on Mon Feb 24 14:07:48 2020

Copyright (c) 1982, 2014, Oracle.  All rights reserved.


Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options

SQL&gt; shutdown immediate
Database closed.
Database dismounted.
ORACLE instance shut down.
SQL&gt; exit
Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options
</pre>
 <h3>
  <a name="TOC-Patch-Installation">
  </a>
  Patch Installation
 </h3>
 <p>
  On
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  only, I ran the following command to patch the Oracle database home:
 </p>
 <pre class="text">cd /tmp/P29141015/29141015
${ORACLE_HOME}/OPatch/opatch apply
</pre>
 <p>
  The output was too long to include here. It is attached as apply_psu_201904_padstow.log. However, it contained the following warning:
 </p>
 <pre class="text">OPatch found the word "error" in the stderr of the make command.
Please look at this stderr. You can re-run this make command.
Stderr output:
chmod: changing permissions of `/opt/app/oracle/product/12.1.0/dbhome_1/bin/extjobO': Operation not permitted
make: [iextjob] Error 1 (ignored)
</pre>
 <p>
  Oracle Support document,
  <a href="https://support.oracle.com/epmos/faces/DocContentDisplay?id=2265726.1" rel="nofollow">
   (Doc ID 2265726.1)
  </a>
  , matches this warning. It says:
 </p>
 <blockquote>
  <p>
   The Issue / Warning "chmod: changing permissions of '$ORACLE_HOME/bin/extjobO'': Operation not permitted" can be ignored safely.
  </p>
 </blockquote>
 <h3>
  <a name="TOC-Patch-Post-Installation">
  </a>
  Patch Post-Installation
 </h3>
 <p>
  On
  <span style="font-family:monospace;background-color:#e6e6e6">
   PADSTOW
  </span>
  only, I ran the following command to do the data patch on the
  <span style="font-family:monospace;background-color:#e6e6e6">
   JAR
  </span>
  database:
 </p>
 <pre class="text">[oracle@padstow 29141015]$ . oraenv
ORACLE_SID = [jar] ? 
The Oracle base remains unchanged with value /opt/app/oracle
[oracle@padstow 29141015]$ sqlplus / as sysdba

SQL*Plus: Release 12.1.0.2.0 Production on Mon Feb 24 15:43:57 2020

Copyright (c) 1982, 2014, Oracle.  All rights reserved.

Connected to an idle instance.

SQL&gt; startup
ORACLE instance started.

Total System Global Area 1577058304 bytes
Fixed Size		    2924832 bytes
Variable Size		  503320288 bytes
Database Buffers	 1056964608 bytes
Redo Buffers		   13848576 bytes
Database mounted.
Database opened.
SQL&gt; quit
Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics, Real Application Testing
and Unified Auditing options
[oracle@padstow 29141015]$ cd $ORACLE_HOME/OPatch
[oracle@padstow OPatch]$ ./datapatch
SQL Patching tool version 12.1.0.2.0 Production on Mon Feb 24 15:48:55 2020
Copyright (c) 2012, 2016, Oracle.  All rights reserved.

Connecting to database...OK
Note:  Datapatch will only apply or rollback SQL fixes for PDBs
       that are in an open state, no patches will be applied to closed PDBs.
       Please refer to Note: Datapatch: Database 12c Post Patch SQL Automation
       (Doc ID 1585822.1)
Bootstrapping registry and package to current versions...done
Determining current state...done
Adding patches to installation queue and performing prereq checks...done
Installation queue:
  For the following PDBs: CDB$ROOT PDB$SEED PLUM JAM0 VEGEMITER JAM1 JAM
    Nothing to roll back
    The following patches will be applied:
      29141015 (DATABASE PATCH SET UPDATE 12.1.0.2.190416)

Installing patches...
Patch installation complete.  Total patches installed: 7

Validating logfiles...done
SQL Patching tool complete on Mon Feb 24 16:02:38 2020
</pre>
 <p>
  There is no need to apply the data patch on the physical standby.
 </p>
</div>
